<div class="card mb-3">
  <div class="card-header">
    <div class="d-flex justify-content-between align-items-center gap-3 flex-wrap">
      <div class="flex-grow-1 d-flex flex-column">
        <h2 class="mb-0 text-nowrap h5"><%= t('.header_dataset_text') %> <%= dataset.data.dataset_persistent_id %></h2>
        <span class="text-muted" style="font-size: 0.8rem;">
          <strong><%= dataset.metadata_field('title').to_s %></strong>
        </span>
      </div>
      <% if Current.settings.user_settings.active_project.present? %>
        <%= button_to project_upload_bundles_path(Current.settings.user_settings.active_project),
                      method: :post,
                      params: { remote_repo_url: external_dataset_url(current_dataverse_url, dataset.data.dataset_persistent_id) },
                      class: 'btn btn-sm btn-outline-secondary',
                      title: t('.button_create_bundle_title') do %>
          <i class="bi bi-folder-plus" aria-hidden="true"></i>
          <span class="ps-1"><%= t('.button_create_bundle_label') %></span>
        <% end %>
      <% end %>
      <%= link_to external_dataset_url(current_dataverse_url, dataset.data.dataset_persistent_id),
                  target: '_blank',
                  class: 'btn btn-sm btn-outline-secondary',
                  title: t('.link_open_dataset_title') do %>
        <i class="bi bi-box-arrow-up-right" aria-hidden="true"></i>
        <span class="visually-hidden"><%= t('.link_open_dataset_title') %></span>
      <% end %>
    </div>
    <div class="mt-2">
      <a class="d-flex align-items-center text-decoration-none text-secondary"
         data-bs-toggle="collapse"
         data-controller="utils--icon-toggle"
         data-utils--icon-toggle-icon-on-value="bi-plus-square"
         data-utils--icon-toggle-icon-off-value="bi-dash-square"
         data-action="click->utils--icon-toggle#toggle"
         href="#dataset-details"
         role="button"
         aria-expanded="false"
         aria-controls="dataset-details">
        <i data-utils--icon-toggle-target="icon" class="bi bi-plus-square me-2 transition" id="toggle-icon" aria-hidden="true"></i>
        <span><%= t('.button_toggle_label') %></span>
      </a>
      <div class="collapse" id="dataset-details">
        <div class="pt-2">
          <ul class="list-group">
            <li class="list-group-item">
              <%= strip_tags(dataset.description) %>
            </li>
            <li class="list-group-item">
              <strong><%= t('.field_publication_date_text') %></strong> <%= dataset.data.publication_date %>
            </li>
            <li class="list-group-item">
              <strong><%= t('.field_authors_text') %></strong> <%= dataset.authors %>
            </li>
            <li class="list-group-item">
              <strong><%= t('.field_subjects_text') %></strong> <%= dataset.subjects %>
            </li>
            <li class="list-group-item">
              <strong><%= t('.field_license_text') %></strong> <%= image_tag dataset.data.license&.icon_uri, alt: dataset.data.license&.name if dataset.data.license&.icon_uri %>
              <%= dataset.data.license.name %>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

