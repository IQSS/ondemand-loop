<%= form_with url: url,
              method: (local_assigns[:method] || :post),
              class: (local_assigns[:form_class] || "d-inline"),
              data: (local_assigns[:form_data] || {}) do %>

  <%= yield %>

  <%= button_tag type: "submit",
                 class: "btn #{local_assigns[:class] || 'btn-outline-dark btn-sm'}",
                 title: local_assigns[:title],
                 data: {
                   controller: "submit-button",
                   action: "click->submit-button#click"
                 }.merge(local_assigns[:button_data] || {}) do %>

    <span data-submit-button-target="spinner"
          class="spinner-border spinner-border-sm me-1 d-none"
          role="status" aria-hidden="true"></span>

    <span data-submit-button-target="label">
      <% if local_assigns[:icon] %>
        <i class="<%= icon %>"></i>
      <% end %>
      <% if local_assigns[:label] %>
        <span class="ps-1"><%= label %></span>
      <% end %>
    </span>

  <% end %>

<% end %>
