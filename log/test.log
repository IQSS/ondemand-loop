[DataverseHubRegistry] Loaded
[RepoRegistry] Resolvers loaded: Repo::Resolvers::DoiResolver (99000), Repo::Resolvers::DataverseResolver (10000), Repo::Resolvers::DataCiteResolver (100)
[RepoRegistry] RepoDb created entries: 0 path: /root/.downloads-for-ondemand/repos/repo_db.yml
[DataverseHubRegistry] Loaded
[RepoRegistry] Resolvers loaded: Repo::Resolvers::DoiResolver (99000), Repo::Resolvers::DataverseResolver (10000), Repo::Resolvers::DataCiteResolver (100)
[RepoRegistry] RepoDb created entries: 0 path: /root/.downloads-for-ondemand/repos/repo_db.yml
-----------------------------------------------------------------------------------------------------
Dataverse::DataverseHubTest: test_installations_returns_stored_data_without_refetching_if_not_expired
-----------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------
Dataverse::DataverseHubTest: test_installations_does_not_update_stored_data_when_fetch_result_is_empty
------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
Dataverse::DataverseHubTest: test_installations_fetches_and_stores_non-empty_results
------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
Dataverse::DataverseHubTest: test_installations_re-fetches_after_expiry_and_updates_cache_with_new_value
--------------------------------------------------------------------------------------------------------
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:38 UTC - Fetching Dataverse Hub installations... url=https://my.hub.com/api/installation
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:38 UTC - Fetching Dataverse Hub installations... url=https://my.hub.com/api/installation
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:38 UTC - Fetching Dataverse Hub installations... url=https://my.hub.com/api/installation
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:38 UTC - Completed loading Dataverse installations servers=1
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:38 UTC - Completed loading Dataverse installations servers=2
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:38 UTC - Completed loading Dataverse installations servers=1
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:40 UTC - Fetching Dataverse Hub installations... url=https://my.hub.com/api/installation
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:38 UTC - Fetching Dataverse Hub installations... url=https://my.hub.com/api/installation
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:40 UTC - Completed loading Dataverse installations servers=0
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:38 UTC - Completed loading Dataverse installations servers=1
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:40 UTC - Fetching Dataverse Hub installations... url=https://my.hub.com/api/installation
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:40 UTC - Completed loading Dataverse installations servers=1
-------------------------------------------------------------------------------------------
Dataverse::DataverseHubTest: test_installations_returns_existing_data_if_fetch_raises_error
-------------------------------------------------------------------------------------------
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:38 UTC - Fetching Dataverse Hub installations... url=https://my.hub.com/api/installation
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:38 UTC - Completed loading Dataverse installations servers=1
-----------------------------------------------------------------------------------------------------------------------------------
Dataverse::DataverseRestrictionsServiceTest: test_should_validate_dataset_always_as_valid_since_there_is_no_limit_on_the_file_count
-----------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------
Dataverse::DataverseRestrictionsServiceTest: test_should_return_invalid_file_for_exceeding_max_size_constraint
--------------------------------------------------------------------------------------------------------------
[INFO](10780) Dataverse::DataverseHub 2025-06-05 22:47:40 UTC - Fetching Dataverse Hub installations... url=https://my.hub.com/api/installation
[ERROR](10780) Dataverse::DataverseHub 2025-06-05 22:47:40 UTC - Error fetching Dataverse Hub data url=https://my.hub.com/api/installation
[STACK] boom
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:11:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
---------------------------------------------------------------------------------------------------------------
Dataverse::DataverseRestrictionsServiceTest: test_should_validate_file_size_constraint_with_custom_restrictions
---------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------
Dataverse::DataverseRestrictionsServiceTest: test_should_validate_file_within_max_size_constraint
-------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
FileStatusSummaryTest: test_status_summary_returns_correct_counts_by_status_and_total
-------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------
FileStatusSummaryTest: test_status_summary_returns_0_for_statuses_that_are_not_present
--------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
FileStatusSummaryTest: test_status_summary_returns_total_0_when_status_files_is_empty
-------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
FileStatusSummaryTest: test_status_summary_returns_total_0_when_status_files_is_nil
-----------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_empty_string_raises_JSON::ParserError_for_dataset_files
-------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_find_files_matches_no_files_with_nil_in_dataset_files
-----------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_find_files_matches_no_files_with_empty_array_in_dataset_files
-------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_dataset_files_incomplete_with_no_data
-------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_find_files_matches_no_files_with_wrong_id_in_dataset_files
----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_empty_json_for_dataset_files_does_not_throw_exception
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_files_method_in_dataset_files
-----------------------------------------------------------------------
--------------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_find_files_matches_one_file_in_dataset_files
--------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_find_files_matches_one_file_as_string_id_in_dataset_files
---------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_valid_json_parses_@dataset_files_response_files
-----------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_dataset_incomplete_with_no_data_file_in_some_files
--------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_find_files_matches_no_files_with_multiple_array_in_dataset_files
----------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
Dataverse::DatasetFilesResponseTest: test_valid_json_parses_@dataset_files_response
-----------------------------------------------------------------------------------
---------------------------------------------------------------------------
Repo::RepoResolverServiceTest: test_should_stop_on_error_and_return_unknown
---------------------------------------------------------------------------
-------------------------------------------------------------------------------
Repo::RepoResolverServiceTest: test_should_resolve_when_first_resolver_succeeds
-------------------------------------------------------------------------------
[ERROR](10780) Repo::RepoResolverService 2025-06-05 22:47:38 UTC - Error while executing URL resolvers resolver=Repo::RepoResolverServiceTest::DummyResolver
[STACK] Unexpected failure
[STACK] /usr/local/app/test/services/repo/repo_resolver_service_test.rb:7:in `resolve'
[STACK] /usr/local/app/app/services/repo/repo_resolver_service.rb:14:in `block in resolve'
[STACK] /usr/local/app/app/services/repo/repo_resolver_service.rb:13:in `each'
[STACK] /usr/local/app/app/services/repo/repo_resolver_service.rb:13:in `resolve'
[STACK] /usr/local/app/test/services/repo/repo_resolver_service_test.rb:54:in `block in <class:RepoResolverServiceTest>'
------------------------------------------------------------------------------------------------------------
Repo::RepoResolverServiceTest: test_should_ignore_non-resolving_resolvers_and_return_unknown_if_none_succeed
------------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------
Repo::RepoResolverServiceTest: test_should_return_unknown_result_when_URL_is_blank
----------------------------------------------------------------------------------
--------------------------------------------------------------------------------------
Repo::RepoResolverServiceTest: test_should_skip_first_resolver_and_resolve_with_second
--------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
LoggingCommonTest: test_log_error_should_call_Rails.logger.error_with_formatted_message
---------------------------------------------------------------------------------------
----------------------------------------------------------------------
LoggingCommonTest: test_format_log_should_format_log_message_correctly
----------------------------------------------------------------------
--------------------------------------------------------------------------------------------
LoggingCommonTest: test_log_error_should_include_exception_stack_trace_if_exception_provided
--------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
LoggingCommonTest: test_log_info_should_call_Rails.logger.info_with_formatted_message
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------
Command::CommandRegistryTest: test_dispatch_executes_only_the_first_handler_that_returns_non-nil_and_skips_the_rest
-------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------
Command::CommandRegistryTest: test_registers_valid_service_and_dispatch_returns_first_result
--------------------------------------------------------------------------------------------
------------------------------------------------------------------------
Command::CommandRegistryTest: test_reset!_clears_all_registered_handlers
------------------------------------------------------------------------
------------------------------------------------------------------------------------
Command::CommandRegistryTest: test_dispatch_returns_error_if_all_handlers_return_nil
------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
Command::CommandRegistryTest: test_dispatch_handles_exception_in_handler_and_logs_error
---------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------
Command::CommandRegistryTest: test_raises_ArgumentError_when_registering_non-processable_service
------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
Command::CommandRegistryTest: test_dispatch_returns_error_if_no_handlers_registered
-----------------------------------------------------------------------------------
--------------------------------------------------------------------------
FileBrowserControllerTest: test_should_get_index_with_valid_directory_path
--------------------------------------------------------------------------
----------------------------------------------------------------------------
FileBrowserControllerTest: test_should_not_allow_access_to_unauthorized_path
----------------------------------------------------------------------------
Started GET "/file_browser?path=%2Ftmp%2Fd20250605-167-e807jk" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Started GET "/file_browser?path=%2Funauthorized%2Fpath" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
---------------------------------------------------
UrlParserTest: test_should_parse_standard_HTTPS_URL
---------------------------------------------------
--------------------------------------------
UrlParserTest: test_path_should_default_to_/
--------------------------------------------
------------------------------------------------------
UrlParserTest: test_should_handle_URL_with_only_domain
------------------------------------------------------
---------------------------------------------------------------
UrlParserTest: test_should_normalize_path_with_multiple_slashes
---------------------------------------------------------------
------------------------------------------------------------------------
UrlParserTest: test_should_raise_NoMethodError_when_calling_new_directly
------------------------------------------------------------------------
-----------------------------------------------------
UrlParserTest: test_should_return_nil_for_invalid_URL
-----------------------------------------------------
----------------------------------------------------------
UrlParserTest: test_should_handle_URL_with_no_query_params
----------------------------------------------------------
----------------------------------------------------------
UrlParserTest: test_should_parse_HTTP_URL_with_custom_port
----------------------------------------------------------
--------------------------------------------------
UrlParserTest: test_should_parse_standard_HTTP_URL
--------------------------------------------------
-------------------------------------------------------
Repo::RepoDbTest: test_should_add_and_retrieve_an_entry
-------------------------------------------------------
-----------------------------------------------------------------
Repo::RepoDbTest: test_should_return_correct_size_and_all_entries
-----------------------------------------------------------------
[INFO](10780) Repo::RepoDb 2025-06-05 22:47:38 UTC - Entry added domain=demo.org type=dataverse
---------------------------------------------
Repo::RepoDbTest: test_should_update_metadata
---------------------------------------------
[INFO](10780) Repo::RepoDb 2025-06-05 22:47:38 UTC - Entry added domain=demo.org type=dataverse
Processing by FileBrowserController#index as HTML
  Parameters: {"path"=>"/tmp/d20250605-167-e807jk"}
[INFO](10780) Repo::RepoDb 2025-06-05 22:47:38 UTC - Entry added domain=demo.org type=dataverse
[INFO](10780) Repo::RepoDb 2025-06-05 22:47:38 UTC - Entry added domain=example.com type=dataverse
[INFO](10780) Repo::RepoDb 2025-06-05 22:47:38 UTC - Entry updated domain=demo.org type=dataverse
Processing by FileBrowserController#index as HTML
  Parameters: {"path"=>"/unauthorized/path"}
------------------------------------------------------
Repo::RepoDbTest: test_should_not_persist_invalid_type
------------------------------------------------------
---------------------------------------------
Repo::RepoDbTest: test_should_delete_an_entry
---------------------------------------------
[INFO](10780) Repo::RepoDb 2025-06-05 22:47:38 UTC - Entry added domain=demo.org type=dataverse
----------------------------------------------------------------------
Repo::RepoDbTest: test_should_raise_error_when_updating_unknown_domain
----------------------------------------------------------------------
----------------------------------------------------------
Repo::RepoDbTest: test_should_persist_and_reload_from_file
----------------------------------------------------------
[INFO](10780) Repo::RepoDb 2025-06-05 22:47:38 UTC - Entry added domain=demo.org type=dataverse
-----------------------------------------------------------------------------------------
ApplicationDiskRecordTest: test_generate_code_returns_alphanumeric_string_of_given_length
-----------------------------------------------------------------------------------------
------------------------------------------------------------------------
ApplicationDiskRecordTest: test_update_updates_attributes_and_calls_save
------------------------------------------------------------------------
----------------------------------------------------------------------------------
ApplicationDiskRecordTest: test_metadata_root_directory_returns_configuration_root
----------------------------------------------------------------------------------
-----------------------------------------------------------------
ApplicationDiskRecordTest: test_generate_id_returns_a_UUID_string
-----------------------------------------------------------------
-----------------------------------------------------------------------
ApplicationDiskRecordTest: test_update_skips_attributes_without_setters
-----------------------------------------------------------------------
------------------------------------------------------------------------------------
ApplicationDiskRecordTest: test_save_method_raises_NotImplementedError_in_base_class
------------------------------------------------------------------------------------
-----------------------------------------------------------
ConnectorTypeTest: test_should_initialize_with_a_valid_type
-----------------------------------------------------------
--------------------------------------------
ConnectorTypeTest: test_should_be_dataverse?
--------------------------------------------
----------------------------------------------------
ConnectorTypeTest: test_should_not_be_case_sensitive
----------------------------------------------------
-----------------------------------------------------------
ConnectorTypeTest: test_should_raise_error_for_invalid_type
-----------------------------------------------------------
-------------------------------------------------------------------------------------------------------
DetachedProcessTest: test_launch_starts_controller,_services,_command_server_and_logs_process_lifecycle
-------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------
DetachedProcessTest: test_launch_exits_early_if_lock_is_already_held
--------------------------------------------------------------------
[INFO](10780) DetachedProcess 2025-06-05 22:47:38 UTC - Process launched pid=169 elapsed_time=00:00:00
[INFO](10780) DetachedProcess 2025-06-05 22:47:38 UTC - Exit. Other DetachedProcess already running pid=169 elapsed_time=00:00:00
-----------------------------------------------------------------------------------------------
DetachedProcessTest: test_launch_still_shuts_down_command_server_if_error_raised_during_startup
-----------------------------------------------------------------------------------------------
[INFO](10780) DetachedProcess 2025-06-05 22:47:38 UTC - Process launched pid=163 elapsed_time=00:00:00
[INFO](10780) DetachedProcess 2025-06-05 22:47:38 UTC - Process launched pid=169 elapsed_time=00:00:00
[INFO](10780) DetachedProcess 2025-06-05 22:47:38 UTC - Completed pid=163 elapsed_time=00:00:00
[ERROR](10780) DetachedProcess 2025-06-05 22:47:38 UTC - Exit. Error while executing DetachedProcess pid=169 elapsed_time=00:00:00
[STACK] Startup failure
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:11:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
-------------------------------------------------------------------------------------
RepoResolverControllerTest: test_should_redirect_back_with_error_if_repo_url_is_blank
-------------------------------------------------------------------------------------
----------------------------------------------------------------------------------
RepoResolverControllerTest: test_should_redirect_back_with_error_if_URL_is_unknown
----------------------------------------------------------------------------------
Started POST "/view/repo/resolve" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Started POST "/view/repo/resolve" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by RepoResolverController#resolve as HTML
Processing by RepoResolverController#resolve as HTML
  Parameters: {"repo_url"=>"https://unknown.repo.org"}
  Parameters: {"repo_url"=>""}
Completed 403 Forbidden in 51ms (Views: 0.4ms | GC: 0.0ms)
-------------------------------------------------------------------------------------------------
RepoResolverControllerTest: test_should_redirect_to_resolved_controller_URL_with_optional_message
-------------------------------------------------------------------------------------------------
Redirected to http://www.example.com/
Redirected to http://www.example.com/
Completed 302 Found in 17ms (GC: 0.0ms)
Completed 302 Found in 17ms (GC: 0.0ms)
Started POST "/view/repo/resolve" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
  Rendered shared/_ood_folder_button.html.erb (Duration: 1.0ms | GC: 0.0ms)
-------------------------------------------------------------------
UploadStatusControllerTest: test_should_get_index_on_disk_with_data
-------------------------------------------------------------------
---------------------------------------------------------------
UploadStatusControllerTest: test_should_get_index_on_empty_disk
---------------------------------------------------------------
Processing by RepoResolverController#resolve as HTML
  Parameters: {"repo_url"=>"https://demo.repo.org/some/path"}
  Rendered file_browser/_browser.html.erb (Duration: 7.4ms | GC: 0.0ms)
Completed 200 OK in 63ms (Views: 14.7ms | GC: 0.0ms)
Redirected to http://www.example.com/projects/123
Completed 302 Found in 3ms (GC: 0.0ms)
-------------------------------------------------------------------------------
Common::FileUtilsTest: test_normalize_name_handles_filenames_with_multiple_dots
-------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Common::FileUtilsTest: test_metadata_file_handles_nested_directories_in_filename
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------------
Common::FileUtilsTest: test_normalize_name_should_parameterize_string_with_underscores
--------------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Common::FileUtilsTest: test_unique_filename_handles_filenames_with_multiple_dots
--------------------------------------------------------------------------------
Started GET "/uploads" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
-------------------------------------------------------------------------------------------
Common::FileUtilsTest: test_make_download_file_unique_normalizes_updated_filename_correctly
-------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------
Common::FileUtilsTest: test_normalize_name_handles_unicode_and_special_characters
---------------------------------------------------------------------------------
------------------------------------------------------------------------
Common::FileUtilsTest: test_metadata_file_handles_file_with_no_extension
------------------------------------------------------------------------
Processing by UploadStatusController#index as HTML
-------------------------------------------------------------------------------------------
Common::FileUtilsTest: test_metadata_file_should_generate_yml_path_from_normalized_filename
-------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------
Common::FileUtilsTest: test_unique_filename_should_return_original_filename_if_metadata_file_does_not_exist
-----------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------
Common::FileUtilsTest: test_unique_filename_handles_files_with_no_extension
---------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------
Common::FileUtilsTest: test_unique_filename_should_return_incremented_filename_if_metadata_file_exists
------------------------------------------------------------------------------------------------------
Started GET "/uploads" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
-----------------------------------------------------------------------------------
Common::FileUtilsTest: test_make_download_file_unique_should_update_filename_and_id
-----------------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering upload_status/index.html.erb within layouts/application
------------------------------------------------------------------------------
Common::FileUtilsTest: test_normalize_name_handles_filenames_without_extension
------------------------------------------------------------------------------
Processing by UploadStatusController#index as HTML
---------------------------------------------------------------------------------
Common::FileUtilsTest: test_unique_filename_should_raise_error_after_max_attempts
---------------------------------------------------------------------------------
  Rendered shared/_breadcrumbs.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered upload_status/_actions.html.erb (Duration: 0.4ms | GC: 0.0ms)
--------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_redirect_if_project_fails_to_save
--------------------------------------------------------------------------------
  Rendered upload_status/_files.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered upload_status/index.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering upload_status/index.html.erb within layouts/application
  Rendered shared/_breadcrumbs.html.erb (Duration: 1.5ms | GC: 0.0ms)
  Rendered upload_status/_actions.html.erb (Duration: 0.4ms | GC: 0.0ms)
Started POST "/view/dataverse/download/dataset" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
  Rendered upload_status/_files.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered upload_status/index.html.erb within layouts/application (Duration: 4.3ms | GC: 0.0ms)
  Rendered layouts/_config.html.erb (Duration: 0.9ms | GC: 0.0ms)
Processing by Dataverse::DatasetsController#download as HTML
  Parameters: {"file_ids"=>["123"], "project_id"=>nil, "dataverse_url"=>"https://example.dataverse.org", "persistent_id"=>"doi:10.5072/FK2/GCN7US", "page"=>"1"}
Redirected to http://www.example.com/
Completed 302 Found in 1ms (GC: 0.0ms)
------------------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_display_the_dataset_incomplete_with_no_data
------------------------------------------------------------------------------------------
Started GET "/view/dataverse/95517288-0ceb-43f0-a2de-734a235ba7c2/datasets/doi:10.5072/FK2/LLIZ6Q" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by Dataverse::DatasetsController#show as HTML
  Parameters: {"dv_hostname"=>"95517288-0ceb-43f0-a2de-734a235ba7c2", "persistent_id"=>"doi:10.5072/FK2/LLIZ6Q"}
  Rendering layout layouts/application.html.erb
  Rendering dataverse/datasets/show.html.erb within layouts/application
  Rendered dataverse/datasets/_breadcrumbs.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered dataverse/datasets/_dataset_info.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 24.1ms | GC: 21.5ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_config.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 1.2ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 41.5ms | GC: 22.3ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.4ms | GC: 0.0ms)
Completed 200 OK in 48ms (Views: 44.6ms | GC: 22.3ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 2.9ms | GC: 1.0ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.3ms | GC: 0.0ms)
-------------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_display_the_dataset_view_with_the_file
-------------------------------------------------------------------------------------
  Rendered layouts/_footer.html.erb (Duration: 1.7ms | GC: 1.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 39.6ms | GC: 21.8ms)
Completed 200 OK in 45ms (Views: 41.5ms | GC: 21.8ms)
Started GET "/view/dataverse/10e7bc08-5660-4e05-bb25-826d65935006/datasets/doi:10.5072/FK2/GCN7US" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
---------------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_redirect_if_any_download_file_is_invalid
---------------------------------------------------------------------------------------
  Rendered dataverse/datasets/_dataset_metadata.html.erb (Duration: 22.7ms | GC: 21.8ms)
Processing by Dataverse::DatasetsController#show as HTML
  Parameters: {"dv_hostname"=>"10e7bc08-5660-4e05-bb25-826d65935006", "persistent_id"=>"doi:10.5072/FK2/GCN7US"}
  Rendering layout layouts/application.html.erb
  Rendered collection of dataverse/datasets/_dataset_file_row.html.erb [0 times] (Duration: 0.1ms | GC: 0.0ms)
  Rendering dataverse/datasets/show.html.erb within layouts/application
  Rendered dataverse/datasets/_dataset_files.html.erb (Duration: 2.2ms | GC: 0.0ms)
  Rendered dataverse/datasets/show.html.erb within layouts/application (Duration: 28.9ms | GC: 21.8ms)
  Rendered dataverse/datasets/_breadcrumbs.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered dataverse/datasets/_dataset_info.html.erb (Duration: 1.8ms | GC: 0.7ms)
Started POST "/view/dataverse/download/dataset" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
  Rendered dataverse/datasets/_dataset_metadata.html.erb (Duration: 0.6ms | GC: 0.0ms)
Processing by Dataverse::DatasetsController#download as HTML
  Parameters: {"file_ids"=>["1", "2"], "project_id"=>nil, "dataverse_url"=>"https://example.dataverse.org", "persistent_id"=>"doi:10.5072/FK2/GCN7US", "page"=>"1"}
[ERROR](10780) Dataverse::DatasetsController 2025-06-05 22:47:38 UTC - DownloadFile validation error error=Invalid file project_id=5b4da17e-9982-4c19-8fbd-d67de051acac file={"id":null,"project_id":null,"type":"","filename":"bad_file.txt","status":"","size":null,"creation_date":null,"start_date":null,"end_date":null,"metadata":null}
Redirected to http://www.example.com/
Completed 302 Found in 1ms (GC: 0.0ms)
  Rendered collection of dataverse/datasets/_dataset_file_row.html.erb [2 times] (Duration: 2.0ms | GC: 0.5ms)
  Rendered dataverse/datasets/_dataset_files.html.erb (Duration: 4.0ms | GC: 0.5ms)
  Rendered dataverse/datasets/show.html.erb within layouts/application (Duration: 9.0ms | GC: 1.2ms)
  Rendered layouts/_config.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
-----------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_redirect_if_download_file_save_fails
-----------------------------------------------------------------------------------
  Rendered layouts/nav/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered layouts/_config.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.8ms | GC: 1.7ms)
Completed 200 OK in 14ms (Views: 13.3ms | GC: 1.7ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 1.7ms | GC: 0.0ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.6ms | GC: 0.0ms)
Started POST "/view/dataverse/download/dataset" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
  Rendered layouts/_flash_messages.html.erb (Duration: 0.3ms | GC: 0.0ms)
Processing by Dataverse::DatasetsController#download as HTML
  Parameters: {"file_ids"=>["1"], "project_id"=>nil, "dataverse_url"=>"https://example.dataverse.org", "persistent_id"=>"doi:10.5072/FK2/GCN7US", "page"=>"1"}
Redirected to http://www.example.com/
Completed 302 Found in 1ms (GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 1.1ms | GC: 0.5ms)
  Rendered shared/_modal.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 45.7ms | GC: 26.2ms)
----------------------------------------------------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_redirect_to_root_path_after_raising_Unauthorized_exception_only_in_files_page
----------------------------------------------------------------------------------------------------------------------------
Completed 200 OK in 51ms (Views: 48.6ms | GC: 26.2ms)
---------------------------------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_redirect_to_root_path_after_raising_Unauthorized_exception
---------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_redirect_to_root_path_after_not_finding_a_dataverse_host
-------------------------------------------------------------------------------------------------------
Started GET "/view/dataverse/random/datasets/random_id" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Started GET "/view/dataverse/223866d4-fde3-457f-9cc6-1ba34a217c79/datasets/random_id" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by Dataverse::DatasetsController#show as HTML
  Parameters: {"dv_hostname"=>"random", "persistent_id"=>"random_id"}
Processing by Dataverse::DatasetsController#show as HTML
  Parameters: {"dv_hostname"=>"223866d4-fde3-457f-9cc6-1ba34a217c79", "persistent_id"=>"random_id"}
Started GET "/view/dataverse/c95ca168-badf-4d5c-9f85-d311f8397f4a/datasets/random_id" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
[ERROR](10780) Dataverse::DatasetsController 2025-06-05 22:47:38 UTC - Dataverse service error dataverse=https://random persistent_id=random_id
[STACK] error
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:12:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
[ERROR](10780) Dataverse::DatasetsController 2025-06-05 22:47:38 UTC - Dataset requires authorization dataverse=https://223866d4-fde3-457f-9cc6-1ba34a217c79 persistent_id=random_id
[STACK] Dataverse::ApiService::UnauthorizedException
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:12:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
Redirected to http://www.example.com/
Filter chain halted as :find_dataset_by_persistent_id rendered or redirected
Redirected to http://www.example.com/
Completed 302 Found in 1ms (GC: 0.0ms)
Filter chain halted as :find_dataset_by_persistent_id rendered or redirected
Completed 302 Found in 1ms (GC: 0.0ms)
--------------------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_redirect_to_root_path_after_raising_exception
--------------------------------------------------------------------------------------------
Processing by Dataverse::DatasetsController#show as HTML
  Parameters: {"dv_hostname"=>"c95ca168-badf-4d5c-9f85-d311f8397f4a", "persistent_id"=>"random_id"}
-----------------------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_display_the_dataset_incomplete_with_no_data_file
-----------------------------------------------------------------------------------------------
[ERROR](10780) Dataverse::DatasetsController 2025-06-05 22:47:38 UTC - Dataset files endpoint requires authorization dataverse=https://c95ca168-badf-4d5c-9f85-d311f8397f4a persistent_id=random_id page=1
[STACK] Dataverse::ApiService::UnauthorizedException
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:12:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
Started GET "/view/dataverse/7aa7cda9-cd56-47cb-89d2-d9bbc91606cf/datasets/random_id" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
------------------------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_redirect_to_root_path_after_not_finding_a_dataset
------------------------------------------------------------------------------------------------
Processing by Dataverse::DatasetsController#show as HTML
  Parameters: {"dv_hostname"=>"7aa7cda9-cd56-47cb-89d2-d9bbc91606cf", "persistent_id"=>"random_id"}
[ERROR](10780) Dataverse::DatasetsController 2025-06-05 22:47:38 UTC - Dataverse service error dataverse=https://7aa7cda9-cd56-47cb-89d2-d9bbc91606cf persistent_id=random_id
[STACK] error
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:12:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
Redirected to http://www.example.com/
Started GET "/view/dataverse/e02900af-af4b-488e-8a9a-aec91165f691/datasets/random_id" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Filter chain halted as :find_dataset_by_persistent_id rendered or redirected
Started GET "/view/dataverse/33ac97b8-184c-4a08-9778-e2ffcd1d61a4/datasets/doi:10.5072/FK2/LLIZ6Q" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Completed 302 Found in 1ms (GC: 0.0ms)
Processing by Dataverse::DatasetsController#show as HTML
  Parameters: {"dv_hostname"=>"e02900af-af4b-488e-8a9a-aec91165f691", "persistent_id"=>"random_id"}
Processing by Dataverse::DatasetsController#show as HTML
  Parameters: {"dv_hostname"=>"33ac97b8-184c-4a08-9778-e2ffcd1d61a4", "persistent_id"=>"doi:10.5072/FK2/LLIZ6Q"}
[ERROR](10780) Dataverse::DatasetsController 2025-06-05 22:47:38 UTC - Dataset not found. dataverse=https://e02900af-af4b-488e-8a9a-aec91165f691 persistent_id=random_id
Redirected to http://www.example.com/
Filter chain halted as :find_dataset_by_persistent_id rendered or redirected
Completed 302 Found in 1ms (GC: 0.0ms)
Redirected to http://www.example.com/
Filter chain halted as :search_files_page rendered or redirected
Completed 302 Found in 4ms (GC: 0.5ms)
  Rendering layout layouts/application.html.erb
  Rendering dataverse/datasets/show.html.erb within layouts/application
------------------------------------------------------------------------------------------------------------
Dataverse::DatasetsControllerTest: test_should_redirect_with_notice_if_download_files_are_saved_successfully
------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------
  Rendered dataverse/datasets/_breadcrumbs.html.erb (Duration: 1.8ms | GC: 0.7ms)
UploadBundleTest: test_project_upload_bundles_methods_returns_empty_list
------------------------------------------------------------------------
------------------------------------------------------------------
UploadBundleTest: test_should_be_invalid_because_of_invalid_values
------------------------------------------------------------------
  Rendered dataverse/datasets/_dataset_info.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered dataverse/datasets/_dataset_metadata.html.erb (Duration: 0.6ms | GC: 0.0ms)
Started POST "/view/dataverse/download/dataset" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
  Rendered collection of dataverse/datasets/_dataset_file_row.html.erb [2 times] (Duration: 2.0ms | GC: 0.6ms)
Processing by Dataverse::DatasetsController#download as HTML
  Parameters: {"file_ids"=>["1", "2"], "project_id"=>nil, "dataverse_url"=>"https://example.dataverse.org", "persistent_id"=>"doi:10.5072/FK2/GCN7US", "page"=>"1"}
-----------------------------------------------------------------------
UploadBundleTest: test_find_retrieves_the_record_only_if_both_ids_match
-----------------------------------------------------------------------
  Rendered dataverse/datasets/_dataset_files.html.erb (Duration: 4.0ms | GC: 0.6ms)
  Rendered dataverse/datasets/show.html.erb within layouts/application (Duration: 8.5ms | GC: 1.3ms)
Redirected to http://www.example.com/
Completed 302 Found in 1ms (GC: 0.0ms)
  Rendered layouts/_config.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 1.0ms | GC: 0.0ms)
-------------------------------------------------
UploadBundleTest: test_save_with_valid_attributes
-------------------------------------------------
-------------------------------------------------------
UploadBundleTest: test_save_twice_only_creates_one_file
-------------------------------------------------------
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
-------------------------------------------------------------------
UploadBundleTest: test_destroy_removes_the_file_from_the_filesystem
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
-------------------------------------------------------------------
  Rendered shared/_modal.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.7ms | GC: 1.9ms)
Completed 200 OK in 14ms (Views: 13.2ms | GC: 1.9ms)
----------------------------------------------------------------------------
UploadBundleTest: test_find_retrieves_the_record_with_the_same_stored_values
----------------------------------------------------------------------------
----------------------------------------------------------------
UploadBundleTest: test_find_retrieves_the_record_if_it_was_saved
----------------------------------------------------------------
-------------------------------------------------------------
UploadBundleTest: test_save_stopped_due_to_invalid_attributes
-------------------------------------------------------------
---------------------------
UploadBundleTest: test_to_h
---------------------------
------------------------------
UploadBundleTest: test_to_yaml
------------------------------
------------------------------
UploadBundleTest: test_to_json
------------------------------
------------------------------------------------------------------------
UploadBundleTest: test_find_does_not_find_the_record_if_it_was_not_saved
------------------------------------------------------------------------
--------------------------------------------------------------
UploadBundleTest: test_should_initialize_with_valid_attributes
--------------------------------------------------------------
--------------------------------------------------------------------------------------
UploadBundleTest: test_project_upload_bundles_methods_returns_list_with_the_collection
--------------------------------------------------------------------------------------
--------------------------------------
UploadBundleTest: test_should_be_valid
--------------------------------------
------------------------------------------------------
Dataverse::ProjectServiceTest: test_initialize_project
------------------------------------------------------
-------------------------------------------------------------
Dataverse::ProjectServiceTest: test_initialize_download_files
-------------------------------------------------------------
------------------------------------------------------------
Dataverse::ProjectServiceTest: test_the_class_is_initialized
------------------------------------------------------------
-------------------------------------------------------------------------------------------
DownloadFilesControllerTest: test_cancel_should_return_200_and_save_file_if_not_downloading
-------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------
DownloadFilesControllerTest: test_cancel_should_return_200_and_update_file_if_downloading_and_command_succeeds
--------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------
DownloadFilesControllerTest: test_cancel_should_return_404_if_file_is_downloading_and_command_fails
---------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------
DownloadFilesControllerTest: test_cancel_should_return_not_found_if_file_is_nil
-------------------------------------------------------------------------------
Started POST "/projects/test_project/downloads/files/file_123/cancel" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Started POST "/projects/test_project/downloads/files/file_123/cancel" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Started POST "/projects/test_project/downloads/files/file_123/cancel" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by DownloadFilesController#cancel as HTML
Processing by DownloadFilesController#cancel as HTML
  Parameters: {"project_id"=>"test_project", "id"=>"file_123"}
  Parameters: {"project_id"=>"test_project", "id"=>"file_123"}
Completed 204 No Content in 0ms (GC: 0.0ms)
Completed 204 No Content in 1ms (GC: 0.0ms)
Started POST "/projects/test_project/downloads/files/file_123/cancel" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by DownloadFilesController#cancel as HTML
  Parameters: {"project_id"=>"test_project", "id"=>"file_123"}
Completed 404 Not Found in 1ms (GC: 0.0ms)
Processing by DownloadFilesController#cancel as HTML
  Parameters: {"project_id"=>"test_project", "id"=>"file_123"}
-------------------------------------------------------------------------------
TabsHelperTest: test_tab_anchor_for_should_return_correct_anchor_ID_for_Project
-------------------------------------------------------------------------------
Completed 404 Not Found in 1ms (Views: 0.1ms | GC: 0.0ms)
---------------------------------------------------------------------------------
TabsHelperTest: test_tab_label_for_should_return_correct_label_ID_for_UploadBatch
---------------------------------------------------------------------------------
------------------------------------------------------------------------
TabsHelperTest: test_tab_href_for_should_return_correct_href_for_Project
------------------------------------------------------------------------
-----------------------------------------------------------------------------------
TabsHelperTest: test_tab_anchor_for_should_return_correct_anchor_ID_for_UploadBatch
-----------------------------------------------------------------------------
-----------------------------------------------------------------------------------
TabsHelperTest: test_tab_label_for_should_return_correct_label_ID_for_Project
-----------------------------------------------------------------------------
----------------------------------------------------------------------------
TabsHelperTest: test_tab_href_for_should_return_correct_href_for_UploadBatch
----------------------------------------------------------------------------
-----------------------------------------------------------------------
Dataverse::DataverseUrlTest: test_should_expose_scheme,_domain_and_port
-----------------------------------------------------------------------
------------------------------------------------------------------------------------
Dataverse::DataverseUrlTest: test_should_parse_file_URL_with_persistentId_and_fileId
------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
Dataverse::DataverseUrlTest: test_should_raise_when_constructing_dataset_url_without_dataset_id
-----------------------------------------------------------------------------------------------
-------------------------------------------------------------
Dataverse::DataverseUrlTest: test_should_parse_collection_URL
-------------------------------------------------------------
-----------------------------------------------------------------------------
Dataverse::DataverseUrlTest: test_should_omit_port_if_using_default_for_https
-----------------------------------------------------------------------------
-----------------------------------------------------------------
Dataverse::DataverseUrlTest: test_should_parse_dataverse_root_URL
-----------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
Dataverse::DataverseUrlTest: test_should_raise_when_constructing_collection_url_without_collection_id
-----------------------------------------------------------------------------------------------------
----------------------------------------------------------
Dataverse::DataverseUrlTest: test_should_parse_dataset_URL
----------------------------------------------------------
-----------------------------------------------------------------------------------------------
Dataverse::DownloadConnectorProcessorTest: test_should_ignore_request_if_file_id_does_not_match
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------
Dataverse::DownloadConnectorProcessorTest: test_should_update_file_metadata_with_download_url_and_locations
-----------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------
Dataverse::DownloadConnectorProcessorTest: test_should_return_error_response_if_md5_does_not_match
--------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------
Dataverse::DownloadConnectorProcessorTest: test_should_return_cancelled_response_if_download_is_cancelled
---------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------
Dataverse::DownloadConnectorProcessorTest: test_should_set_cancelled_true_when_process_receives_matching_request
----------------------------------------------------------------------------------------------------------------
[INFO](10780) Dataverse::DownloadConnectorProcessor 2025-06-05 22:47:38 UTC - Verifying file file_path=/root/downloads-ondemand/7439aca7-705f-44d9-b6b9-60d2d9e8e479/data.csv expected_md5=9473fdd0d880a43c21b7778d34872157
[INFO](10780) Dataverse::DownloadConnectorProcessor 2025-06-05 22:47:38 UTC - Checksum verification success file_path=/root/downloads-ondemand/7439aca7-705f-44d9-b6b9-60d2d9e8e479/data.csv expected_md5=9473fdd0d880a43c21b7778d34872157
[INFO](10780) Dataverse::DownloadConnectorProcessor 2025-06-05 22:47:38 UTC - Download completed id=file-123 location=/root/downloads-ondemand/7439aca7-705f-44d9-b6b9-60d2d9e8e479/data.csv md5_valid=true
----------------------------------------------------------------------------------------------------------
Dataverse::DownloadConnectorProcessorTest: test_should_return_success_response_when_download_and_md5_match
----------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------------------------------------
ConnectorClassDispatcherTest: test_upload_bundle_connector_metadata_should_return_Dataverse::UploadBundleConnectorMetadata_class_for_dataverse_collections
----------------------------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------------------------------
ConnectorClassDispatcherTest: test_download_connector_metadata_should_return_Dataverse::DownloadConnectorMetadata_class_for_dataverse_files
[INFO](10780) Dataverse::DownloadConnectorProcessor 2025-06-05 22:47:38 UTC - Verifying file file_path=/root/downloads-ondemand/5a7c9669-b1e4-43f4-aeac-3b6c97f094f5/data.csv expected_md5=9473fdd0d880a43c21b7778d34872157
-------------------------------------------------------------------------------------------------------------------------------------------
[ERROR](10780) Dataverse::DownloadConnectorProcessor 2025-06-05 22:47:38 UTC - Checksum verification failed file_path=/root/downloads-ondemand/5a7c9669-b1e4-43f4-aeac-3b6c97f094f5/data.csv expected_md5=9473fdd0d880a43c21b7778d34872157 current_md5=4eea91e7a2009ecd9bbf1242b4eaf267
[INFO](10780) Dataverse::DownloadConnectorProcessor 2025-06-05 22:47:38 UTC - Download completed id=file-123 location=/root/downloads-ondemand/5a7c9669-b1e4-43f4-aeac-3b6c97f094f5/data.csv md5_valid=false
-----------------------------------------------------------------------------------------------------------------------------------
ConnectorClassDispatcherTest: test_download_processor_should_return_Dataverse::DownloadConnectorProcessor_class_for_dataverse_files
-----------------------------------------------------------------------------------------------------------------------------------
[INFO](10780) Dataverse::DownloadConnectorProcessor 2025-06-05 22:47:38 UTC - Verifying file file_path=/root/downloads-ondemand/eab25fcd-be2f-4231-9d0b-3a9fda07723a/data.csv expected_md5=9473fdd0d880a43c21b7778d34872157
[INFO](10780) Dataverse::DownloadConnectorProcessor 2025-06-05 22:47:38 UTC - Checksum verification success file_path=/root/downloads-ondemand/eab25fcd-be2f-4231-9d0b-3a9fda07723a/data.csv expected_md5=9473fdd0d880a43c21b7778d34872157
[INFO](10780) Dataverse::DownloadConnectorProcessor 2025-06-05 22:47:38 UTC - Download completed id=file-123 location=/root/downloads-ondemand/eab25fcd-be2f-4231-9d0b-3a9fda07723a/data.csv md5_valid=true
------------------------------------------------------------------------------------------
ConnectorClassDispatcherTest: test_raises_ConnectorNotSupported_for_unknown_connector_type
------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------------------
ConnectorClassDispatcherTest: test_upload_file_connector_status_should_return_Dataverse::UploadConnectorStatus_class_for_dataverse_files
----------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------------------
ConnectorClassDispatcherTest: test_upload_processor_should_return_Dataverse::UploadConnectorProcessor_class_for_dataverse_files
-------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------
ConnectorClassDispatcherTest: test_download_connector_status_should_return_Dataverse::DownloadConnectorStatus_class_for_dataverse_files
---------------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------
ConnectorClassDispatcherTest: test_repo_controller_resolver_should_return_Dataverse::DisplayRepoControllerResolver_class_for_dataverse_files
--------------------------------------------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------------------------------
ConnectorClassDispatcherTest: test_upload_bundle_connector_processor_should_return_Dataverse::UploadBatchConnectorProcessor_class_for_dataverse_type
----------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------
Dataverse::SearchResponseTest: test_search_response_on_empty_json_does_not_throw_exception
------------------------------------------------------------------------------------------
--------------------------------------------------------------------------
Dataverse::SearchResponseTest: test_valid_json_parses_search_response_data
--------------------------------------------------------------------------
-------------------------------------------------------------------------
Dataverse::SearchResponseTest: test_valid_dataset_item_in_search_response
-------------------------------------------------------------------------
----------------------------------------------------------------------------------------------
Dataverse::SearchResponseTest: test_search_response_with_empty_string_raises_JSON::ParserError
----------------------------------------------------------------------------------------------
---------------------------------------------------------------------
Dataverse::SearchResponseTest: test_valid_json_parses_search_response
---------------------------------------------------------------------
---------------------------------------------------------------------------
Dataverse::SearchResponseTest: test_valid_dataverse_item_in_search_response
---------------------------------------------------------------------------
---------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------
ConfigurationSingletonTest: test_should_return_overridden_string_config_values_from_ENV
---------------------------------------------------------------------------------------
ConfigurationSingletonTest: test_rails_env_should_respect_RACK_ENV_if_RAILS_ENV_is_not_set
------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------
ConfigurationSingletonTest: test_rails_env_should_fall_back_to_development_if_no_ENV_vars_are_set
-------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------
ConfigurationSingletonTest: test_rails_env_should_respect_RAILS_ENV_when_set
----------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
ConfigurationSingletonTest: test_should_return_default_string_config_values_when_ENV_is_not_set
-----------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------
Dataverse::CitationMetadataResponseTest: test_citation_metadata_response_with_empty_string_raises_JSON::ParserError
-------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------
Dataverse::CitationMetadataResponseTest: test_citation_metadata_response_on_empty_json_does_not_throw_exception
---------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------
Dataverse::CitationMetadataResponseTest: test_valid_json_parses_CitationMetadata_response
-----------------------------------------------------------------------------------------
------------------------------------------------------------------------------
Dataverse::CitationMetadataResponseTest: test_valid_json_parses_valid_subjects
------------------------------------------------------------------------------
----------------------------------------------------------------------------
ConfigurationPropertyTest: test_PassThroughMapper_should_return_string_as-is
----------------------------------------------------------------------------
---------------------------------------------------------------------------
ConfigurationPropertyTest: test_BooleanMapper_should_map_false-like_strings
---------------------------------------------------------------------------
-----------------------------------------------------------------------------------
ConfigurationPropertyTest: test_BooleanMapper_should_return_true_for_unknown_values
-----------------------------------------------------------------------------------
-------------------------------------------------------------------------------
ConfigurationPropertyTest: test_IntegerMapper_should_parse_valid_integer_string
-------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
ConfigurationPropertyTest: test_IntegerMapper_should_throw_exception_for_invalid_integer_string
-----------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------
ConfigurationPropertyTest: test_should_default_environment_name_if_none_provided
--------------------------------------------------------------------------------
--------------------------------------------------------------
ConfigurationPropertyTest: test_map_string_delegates_to_mapper
--------------------------------------------------------------
--------------------------------------------------------------------------
ConfigurationPropertyTest: test_PathMapper_should_return_nil_for_nil_input
--------------------------------------------------------------------------
-------------------------------------------------------------------------
ConfigurationPropertyTest: test_should_initialize_with_correct_attributes
-------------------------------------------------------------------------
--------------------------------------------------------------------------
ConfigurationPropertyTest: test_BooleanMapper_should_map_true-like_strings
--------------------------------------------------------------------------
--------------------------------------------------------------------------------------
ConfigurationPropertyTest: test_PathMapper_should_create_directory_and_return_Pathname
--------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------
ConfigurationPropertyTest: test_should_not_set_environment_names_if_read_from_env_is_false
------------------------------------------------------------------------------------------
------------------------------------------------------------------
ProcessExecutorTest: test_shutdown_should_call_shutdown_on_service
------------------------------------------------------------------
--------------------------------------------------------------------------------------------
ProcessExecutorTest: test_start_should_run_service_in_a_new_thread_and_call_start_on_service
--------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------
Command::CommandClientTest: test_Should_return_response_when_server_responds_correctly
--------------------------------------------------------------------------------------
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Shutting down name=Mocha::Mock
-----------------------------------------------------------------------------------
Command::CommandClientTest: test_Should_raise_CommandError_if_socket_is_unavailable
-----------------------------------------------------------------------------------
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Starting service name=Mocha::Mock
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - UNIXServer created 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - UNIXServer created 
[INFO](17560) Command::CommandServer 2025-06-05 22:47:38 UTC - Server start socket=/tmp/d20250605-169-5uhgex/command.sock
-------------------------------------------------------------------------------------------
Command::CommandClientTest: test_Should_raise_CommandError_if_error_processing_the_response
-------------------------------------------------------------------------------------------
[INFO](17800) ProcessExecutor 2025-06-05 22:47:38 UTC - Finished service name=Mocha::Mock
[INFO](17580) Command::CommandServer 2025-06-05 22:47:38 UTC - Server start socket=/tmp/d20250605-165-dnixl9/command.sock
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - UNIXServer created 
-----------------------------------------------------------------------------------------------
Command::CommandClientTest: test_Should_raise_TimeoutError_when_server_does_not_respond_in_time
-----------------------------------------------------------------------------------------------
[INFO](16900) Command::CommandServer 2025-06-05 22:47:38 UTC - Server start socket=/tmp/d20250605-167-qn5tw1/command.sock
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - UNIXServer created 
[INFO](17820) Command::CommandServer 2025-06-05 22:47:38 UTC - Server start socket=/tmp/d20250605-163-6mbpf5/command.sock
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - Shutdown completed 
[ERROR](10780) Command::CommandClient 2025-06-05 22:47:38 UTC - Error processing request request=#<Command::Request:0x00007f45ddf7e7f0 @command="status", @headers={}, @body=#<OpenStruct>>
[STACK] No such file or directory - connect(2) for /tmp/d20250605-165-dnixl9/command.sock
[STACK] /usr/local/app/app/services/command/command_client.rb:20:in `initialize'
[STACK] /usr/local/app/app/services/command/command_client.rb:20:in `new'
[STACK] /usr/local/app/app/services/command/command_client.rb:20:in `block in request'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/timeout-0.4.3/lib/timeout.rb:185:in `block in timeout'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/timeout-0.4.3/lib/timeout.rb:38:in `handle_timeout'
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - Shutdown completed 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - Shutdown completed 
[ERROR](16900) Command::CommandServer 2025-06-05 22:47:38 UTC - Error processing request request={"command":"status","headers":{},"body":{}}

[STACK] JSON parsing failed
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:11:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
[ERROR](10780) Command::CommandClient 2025-06-05 22:47:38 UTC - Error processing request request=#<Command::Request:0x00007f45ddaa7fd8 @command="status", @headers={}, @body=#<OpenStruct>>
[STACK] JSON parsing failed
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:11:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - Shutting down server... 
----------------------------------------------------------------------------------
Command::CommandClientTest: test_Should_return_error_for_a_command_with_no_handler
----------------------------------------------------------------------------------
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - Shutdown completed 
------------------------------------------------------------------------------------------------
Download::BasicHttpRubyDownloadTest: test_Should_store_the_download_URL_in_the_expected_location
------------------------------------------------------------------------------------------------
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - UNIXServer created 
[INFO](10780) Download::BasicHttpRubyDownloader 2025-06-05 22:47:38 UTC - Downloading... url=https://doi.org/10.xxxx file=/tmp/d20250605-169-ttektd/output.txt temp=/tmp/d20250605-169-ttektd/output.txt.part
[INFO](17620) Command::CommandServer 2025-06-05 22:47:38 UTC - Server start socket=/tmp/d20250605-165-uj1vd6/command.sock
---------------------------------------------------------------------------------------------------------
Dataverse::UserProfileResponseTest: test_user_profile_response_with_empty_string_raises_JSON::ParserError
---------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
Dataverse::UserProfileResponseTest: test_user_profile_response_on_empty_json_does_not_throw_exception
-----------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Dataverse::UserProfileResponseTest: test_valid_json_parses_user_profile_response
--------------------------------------------------------------------------------
---------------------------------------------------------------------
DownloadStatusControllerTest: test_should_get_index_on_disk_with_data
---------------------------------------------------------------------
-----------------------------------------------------------------
DownloadStatusControllerTest: test_should_get_index_on_empty_disk
-----------------------------------------------------------------
Started GET "/downloads" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by DownloadStatusController#index as HTML
Started GET "/downloads" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
  Rendering layout layouts/application.html.erb
  Rendering download_status/index.html.erb within layouts/application
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.4ms | GC: 0.0ms)
Processing by DownloadStatusController#index as HTML
  Rendered download_status/_actions.html.erb (Duration: 0.7ms | GC: 0.1ms)
  Rendered download_status/_files.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered download_status/index.html.erb within layouts/application (Duration: 2.8ms | GC: 0.1ms)
  Rendered layouts/_config.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering download_status/index.html.erb within layouts/application
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.5ms | GC: 0.2ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | GC: 0.3ms)
Completed 200 OK in 7ms (Views: 6.6ms | GC: 0.3ms)
  Rendered shared/_breadcrumbs.html.erb (Duration: 1.2ms | GC: 0.1ms)
  Rendered download_status/_actions.html.erb (Duration: 0.5ms | GC: 0.0ms)
--------------------------------------------------------------------------------------------
Dataverse::CollectionsControllerTest: test_should_display_the_datavers_view_with_the_results
--------------------------------------------------------------------------------------------
Started GET "/view/dataverse/example.com/dataverses/:root" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by Dataverse::CollectionsController#show as HTML
  Parameters: {"dv_hostname"=>"example.com", "id"=>":root"}
  Rendering layout layouts/application.html.erb
  Rendering dataverse/collections/show.html.erb within layouts/application
  Rendered dataverse/collections/_breadcrumbs.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered dataverse/collections/_collection_info.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataverse_item.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.6ms | GC: 0.1ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataverse_item.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.3ms | GC: 0.1ms)
  Rendered dataverse/collections/_dataverse_item.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataverse_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataverse_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.6ms | GC: 0.2ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered dataverse/collections/_dataset_item.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered collection of dataverse/collections/_item.html.erb [20 times] (Duration: 9.7ms | GC: 0.4ms)
  Rendered dataverse/collections/_search_items.html.erb (Duration: 10.9ms | GC: 0.6ms)
  Rendered dataverse/collections/show.html.erb within layouts/application (Duration: 12.7ms | GC: 0.6ms)
  Rendered layouts/_config.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 1.0ms | GC: 0.2ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.8ms | GC: 0.8ms)
Completed 200 OK in 17ms (Views: 16.1ms | GC: 0.8ms)
---------------------------------------------------------------------------------------------------------
Dataverse::CollectionsControllerTest: test_should_redirect_to_root_path_after_not_finding_search_response
---------------------------------------------------------------------------------------------------------
Started GET "/view/dataverse/example.com/dataverses/:root" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by Dataverse::CollectionsController#show as HTML
  Parameters: {"dv_hostname"=>"example.com", "id"=>":root"}
[ERROR](10780) Dataverse::CollectionsController 2025-06-05 22:47:38 UTC - Dataverse collection not found. dataverse=https://example.com id=:root
Redirected to http://www.example.com/
Completed 302 Found in 1ms (GC: 0.0ms)
-----------------------------------------------------------------------------------------------------
Dataverse::CollectionsControllerTest: test_should_redirect_to_root_path_after_not_finding_a_dataverse
-----------------------------------------------------------------------------------------------------
Started GET "/view/dataverse/example.com/dataverses/:root" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by Dataverse::CollectionsController#show as HTML
  Parameters: {"dv_hostname"=>"example.com", "id"=>":root"}
[ERROR](10780) Dataverse::CollectionsController 2025-06-05 22:47:38 UTC - Dataverse service error dataverse=https://example.com id=:root
[STACK] error
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:12:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
Redirected to http://www.example.com/
Completed 302 Found in 1ms (GC: 0.0ms)
---------------------------------------------------------------------------------------------------------------
Dataverse::CollectionsControllerTest: test_should_redirect_to_root_path_after_finding_an_unauthorized_dataverse
---------------------------------------------------------------------------------------------------------------
Started GET "/view/dataverse/example.com/dataverses/:root" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by Dataverse::CollectionsController#show as HTML
  Parameters: {"dv_hostname"=>"example.com", "id"=>":root"}
[ERROR](10780) Dataverse::CollectionsController 2025-06-05 22:47:38 UTC - Dataverse requires authorization dataverse=https://example.com id=:root
[STACK] Dataverse::ApiService::UnauthorizedException
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:12:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
Redirected to http://www.example.com/
Completed 302 Found in 1ms (GC: 0.0ms)
---------------------------------------------------------------------------------------------------------------------------------
Dataverse::CollectionsControllerTest: test_should_redirect_to_root_path_after_not_finding_neither_dataverse_nor_dataverse_results
---------------------------------------------------------------------------------------------------------------------------------
Started GET "/view/dataverse/example.com/dataverses/:root" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by Dataverse::CollectionsController#show as HTML
  Parameters: {"dv_hostname"=>"example.com", "id"=>":root"}
[ERROR](10780) Dataverse::CollectionsController 2025-06-05 22:47:38 UTC - Dataverse collection not found. dataverse=https://example.com id=:root
Redirected to http://www.example.com/
Completed 302 Found in 0ms (GC: 0.0ms)
------------------------------------------------------------------------------------------------------------
Dataverse::CollectionsControllerTest: test_should_redirect_to_root_path_after_not_finding_dataverse_response
------------------------------------------------------------------------------------------------------------
Started GET "/view/dataverse/example.com/dataverses/:root" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by Dataverse::CollectionsController#show as HTML
  Parameters: {"dv_hostname"=>"example.com", "id"=>":root"}
[ERROR](10780) Dataverse::CollectionsController 2025-06-05 22:47:38 UTC - Dataverse collection not found. dataverse=https://example.com id=:root
Redirected to http://www.example.com/
Completed 302 Found in 2ms (GC: 1.1ms)
------------------------------------------------------------------------------------------------------
Dataverse::DownloadConnectorStatusTest: test_should_return_100_if_the_destination_file_already_created
------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------
Dataverse::DownloadConnectorStatusTest: test_should_return_0_for_missing_files
------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
Dataverse::DownloadConnectorStatusTest: test_should_calculated_percentage_for_downloading_files
-----------------------------------------------------------------------------------------------
------------------------------------------------------------------------------
Dataverse::DownloadConnectorStatusTest: test_should_return_0_for_pending_files
------------------------------------------------------------------------------
----------------------------------------------------------------------------------
Dataverse::DownloadConnectorStatusTest: test_should_return_100_for_completed_files
----------------------------------------------------------------------------------
---------------------------------------------------------------------
DateTimeCommonTest: test_get_time_should_return_nil_if_input_is_blank
---------------------------------------------------------------------
-------------------------------------------------------------------
DateTimeCommonTest: test_get_date_should_return_date_part_as_string
-------------------------------------------------------------------
----------------------------------------------------------
DateTimeCommonTest: test_to_time_should_accept_Time_object
----------------------------------------------------------
------------------------------------------------------------------
DateTimeCommonTest: test_to_time_should_convert_DateTime_into_Time
------------------------------------------------------------------
---------------------------------------------------------------------------
DateTimeCommonTest: test_elapsed_should_calculate_seconds_between_two_times
---------------------------------------------------------------------------
---------------------------------------------------------------------------------------------
DateTimeCommonTest: test_now_should_return_current_time_formatted_as_ISO8601_without_timezone
---------------------------------------------------------------------------------------------
------------------------------------------------------------------------------
DateTimeCommonTest: test_elapsed_string_should_format_elapsed_time_as_HH:MM:SS
------------------------------------------------------------------------------
---------------------------------------------------------------------
DateTimeCommonTest: test_get_date_should_return_nil_if_input_is_blank
---------------------------------------------------------------------
------------------------------------------------------------------
DateTimeCommonTest: test_to_time_should_return_nil_for_blank_input
------------------------------------------------------------------
----------------------------------------------------------------------
DateTimeCommonTest: test_to_time_should_parse_integer_into_Time_object
----------------------------------------------------------------------
------------------------------------------------------------------------
DateTimeCommonTest: test_to_time_should_raise_error_for_unsupported_type
------------------------------------------------------------------------
----------------------------------------------------------------------------
DateTimeCommonTest: test_elapsed_should_default_to_now_if_to_is_not_provided
----------------------------------------------------------------------------
-------------------------------------------------------------------
DateTimeCommonTest: test_get_time_should_return_time_part_as_string
-------------------------------------------------------------------
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:38 UTC - Shutdown completed 
-----------------------------------------------------
UploadFileTest: test_save_twice_only_creates_one_file
-----------------------------------------------------
---------------------------------------------------------------------
DateTimeCommonTest: test_to_time_should_parse_string_into_Time_object
---------------------------------------------------------------------
--------------------------------------------------------------------------
UploadFileTest: test_find_retrieves_the_record_with_the_same_stored_values
--------------------------------------------------------------------------
------------------------------------
UploadFileTest: test_should_be_valid
------------------------------------
------------------------------------------------------------
UploadFileTest: test_should_initialize_with_valid_attributes
------------------------------------------------------------
----------------------------------------------------------------------
UploadFileTest: test_find_does_not_find_the_record_if_it_was_not_saved
----------------------------------------------------------------------
----------------------------------------------------------------
UploadFileTest: test_should_be_invalid_because_of_invalid_values
----------------------------------------------------------------
---------------------------------------------------------------------
UploadFileTest: test_find_retrieves_the_record_only_if_both_ids_match
---------------------------------------------------------------------
-----------------------------------------------------------
UploadFileTest: test_save_stopped_due_to_invalid_attributes
-----------------------------------------------------------
---------------------------
UploadFileTest: test_update
---------------------------
--------------------------------------------------
UploadFileTest: test_should_validate_max_file_size
--------------------------------------------------
  Rendered download_status/_files.html.erb (Duration: 112.2ms | GC: 60.8ms)
  Rendered download_status/index.html.erb within layouts/application (Duration: 115.1ms | GC: 60.8ms)
----------------------------
UploadFileTest: test_to_yaml
----------------------------
--------------------------------------------------------------
UploadFileTest: test_find_retrieves_the_record_if_it_was_saved
--------------------------------------------------------------
  Rendered layouts/_config.html.erb (Duration: 0.9ms | GC: 0.0ms)
----------------------------
UploadFileTest: test_to_json
----------------------------
  Rendered layouts/nav/_logo.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 1.9ms | GC: 0.0ms)
-----------------------------------------------
UploadFileTest: test_save_with_valid_attributes
-----------------------------------------------
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | GC: 0.0ms)
-------------------------
UploadFileTest: test_to_h
-------------------------
  Rendered shared/_modal.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 128.6ms | GC: 61.6ms)
Completed 200 OK in 132ms (Views: 129.7ms | GC: 61.6ms)
-----------------------------------------------------------------------------------------
UploadFilesControllerTest: test_cancel_should_cancel_uploading_file_and_return_no_content
-----------------------------------------------------------------------------------------
-----------------------------------------------------------
UploadFilesControllerTest: test_index_should_return_success
-----------------------------------------------------------
----------------------------------------------------------------------------
Started POST "/projects/test-project/uploads/test-collection/files/file-123/cancel" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
UploadFilesControllerTest: test_should_return_bad_request_if_file_is_invalid
----------------------------------------------------------------------------
Started GET "/projects/test-project/uploads/test-collection/files" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by UploadFilesController#index as HTML
  Parameters: {"project_id"=>"test-project", "upload_bundle_id"=>"test-collection"}
Processing by UploadFilesController#cancel as HTML
  Parameters: {"project_id"=>"test-project", "upload_bundle_id"=>"test-collection", "id"=>"file-123"}
Started POST "/projects/test-project/uploads/test-collection/files" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Completed 204 No Content in 1ms (GC: 0.0ms)
  Rendered projects/show/_upload_files.html.erb (Duration: 0.7ms | GC: 0.1ms)
Completed 200 OK in 1ms (Views: 1.2ms | GC: 0.1ms)
Processing by UploadFilesController#create as HTML
  Parameters: {"path"=>"/usr/local/app/test/fixtures/files/sample.txt", "project_id"=>"test-project", "upload_bundle_id"=>"test-collection"}
-------------------------------------------------------------------------------------
UploadFilesControllerTest: test_create_should_create_and_return_ok_if_files_are_valid
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------
UploadFilesControllerTest: test_cancel_should_return_not_found_if_file_is_missing_on_cancel
-------------------------------------------------------------------------------------------
Started POST "/projects/test-project/uploads/test-collection/files/file-123/cancel" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
[ERROR](10780) UploadFilesController 2025-06-05 22:47:38 UTC - UploadFile validation error error=Size is too large (maximum allowed is 1 GB) project_id=test-project upload_bundle_id=test-collection file={"id":"6e5a345a-4a2b-48bf-8159-a18f8c430e78","project_id":"test-project","upload_bundle_id":"test-collection","file_location":"/usr/local/app/test/fixtures/files/sample.txt","filename":"invalid.txt","status":"pending","size":2147483648,"creation_date":"2025-06-05T22:47:38","start_date":null,"end_date":null}
Started POST "/projects/test-project/uploads/test-collection/files" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Processing by UploadFilesController#cancel as HTML
  Parameters: {"project_id"=>"test-project", "upload_bundle_id"=>"test-collection", "id"=>"file-123"}
Completed 400 Bad Request in 3ms (Views: 0.1ms | GC: 0.1ms)
Completed 404 Not Found in 0ms (Views: 0.1ms | GC: 0.0ms)
Processing by UploadFilesController#create as HTML
  Parameters: {"path"=>"/usr/local/app/test/fixtures/files/sample.txt", "project_id"=>"test-project", "upload_bundle_id"=>"test-collection"}
[INFO](10780) UploadFilesController 2025-06-05 22:47:38 UTC - Added file to upload bundle project_id=test-project upload_bundle_id=test-collection file=valid.txt
Completed 200 OK in 1ms (Views: 0.1ms | GC: 0.0ms)
------------------------------------------------------------------------------
UploadFilesControllerTest: test_delete_should_destroy_upload_file_and_redirect
------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------
UploadFilesControllerTest: test_create_should_return_not_found_if_upload_batch_does_not_exist
---------------------------------------------------------------------------------------------
Started DELETE "/projects/test-project/uploads/test-collection/files/file-123" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
Started POST "/projects/test-project/uploads/test-collection/files" for 127.0.0.1 at 2025-06-05 22:47:38 +0000
-----------------------------------------------------------------------------------------------------------------------------
Processing by UploadFilesController#destroy as HTML
DetachedProcessControllerTest: test_controller_calls_shutdown_on_all_services_even_if_one_raises_an_exception_during_shutdown
  Parameters: {"project_id"=>"test-project", "upload_bundle_id"=>"test-collection", "id"=>"file-123"}
-----------------------------------------------------------------------------------------------------------------------------
Processing by UploadFilesController#create as HTML
  Parameters: {"path"=>"/usr/local/app/test/fixtures/files/sample.txt", "project_id"=>"test-project", "upload_bundle_id"=>"test-collection"}
Redirected to http://www.example.com/
Completed 302 Found in 1ms (GC: 0.0ms)
Completed 404 Not Found in 0ms (GC: 0.0ms)
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Process controller started executors=2
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Launching executor name=DetachedProcessControllerTest::MockService
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Starting service name=DetachedProcessControllerTest::MockService
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Launching executor name=DetachedProcessControllerTest::MockService
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Starting service name=DetachedProcessControllerTest::MockService
---------------------------------------------------------------------------------------------------------------------
DetachedProcessControllerTest: test_controller_calls_shutdown_and_exits_cleanly_even_if_a_service_raises_an_exception
---------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------
DetachedProcessControllerTest: test_controller_only_restarts_dead_services
--------------------------------------------------------------------------
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Process controller started executors=2
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Launching executor name=Mocha::Mock
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Starting service name=Mocha::Mock
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Process controller started executors=2
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Launching executor name=Mocha::Mock
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Launching executor name=DetachedProcessControllerTest::MockService
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Starting service name=Mocha::Mock
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Launching executor name=DetachedProcessControllerTest::MockService
[ERROR](17920) ProcessExecutor 2025-06-05 22:47:38 UTC - Error executing service name=Mocha::Mock
[STACK] Service failed
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:11:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Starting service name=DetachedProcessControllerTest::MockService
[INFO](17660) ProcessExecutor 2025-06-05 22:47:38 UTC - Finished service name=Mocha::Mock
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Starting service name=DetachedProcessControllerTest::MockService
[INFO](18380) ProcessExecutor 2025-06-05 22:47:38 UTC - Finished service name=DetachedProcessControllerTest::MockService
[INFO](18400) ProcessExecutor 2025-06-05 22:47:38 UTC - Finished service name=DetachedProcessControllerTest::MockService
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - All executors idle. Shutting down... executors=2
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Shutting down name=DetachedProcessControllerTest::MockService
[ERROR](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Error shutting down service name=DetachedProcessControllerTest::MockService
[STACK] Shutdown failed
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:11:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Shutting down name=DetachedProcessControllerTest::MockService
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Completed executors=2
---------------------------------------------------------------------------------------------------
DetachedProcessControllerTest: test_controller_starts_all_services_and_shuts_down_when_all_are_idle
---------------------------------------------------------------------------------------------------
[INFO](17940) ProcessExecutor 2025-06-05 22:47:38 UTC - Finished service name=DetachedProcessControllerTest::MockService
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Process controller started executors=2
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Launching executor name=DetachedProcessControllerTest::MockService
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Starting service name=DetachedProcessControllerTest::MockService
[INFO](10780) DetachedProcessController 2025-06-05 22:47:38 UTC - Launching executor name=DetachedProcessControllerTest::MockService
[INFO](10780) ProcessExecutor 2025-06-05 22:47:38 UTC - Starting service name=DetachedProcessControllerTest::MockService
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - Shutting down server... 
[INFO](18500) ProcessExecutor 2025-06-05 22:47:39 UTC - Finished service name=DetachedProcessControllerTest::MockService
[INFO](18520) ProcessExecutor 2025-06-05 22:47:39 UTC - Finished service name=DetachedProcessControllerTest::MockService
[INFO](10780) DetachedProcessController 2025-06-05 22:47:39 UTC - All executors idle. Shutting down... executors=2
[INFO](10780) ProcessExecutor 2025-06-05 22:47:39 UTC - Shutting down name=Mocha::Mock
[INFO](10780) ProcessExecutor 2025-06-05 22:47:39 UTC - Shutting down name=DetachedProcessControllerTest::MockService
[INFO](10780) DetachedProcessController 2025-06-05 22:47:39 UTC - Completed executors=2
[INFO](10780) DetachedProcessController 2025-06-05 22:47:39 UTC - Launching executor name=Mocha::Mock
[INFO](10780) ProcessExecutor 2025-06-05 22:47:39 UTC - Starting service name=Mocha::Mock
[INFO](17680) ProcessExecutor 2025-06-05 22:47:39 UTC - Finished service name=Mocha::Mock
--------------------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_empty_string_raises_JSON::ParserError_on_version
--------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_valid_json_parses_@dataset_version_response_data
--------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_incomplete_json_does_not_throw_exception
------------------------------------------------------------------------------------
---------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_dataset_incomplete_with_no_data
---------------------------------------------------------------------------
--------------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_valid_json_parses_dataset_response_license
--------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_dataset_incomplete_with_no_metadata_blocks
--------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_empty_version_json_does_not_throw_exception
---------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_valid_json_parses_dataset_version_response_files_metadata_fields_description
------------------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_valid_json_parses_dataset_version_response_files_metadata_fields_author
-------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_valid_json_parses_dataset_version_response_files_metadata_fields_title
------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_dataset_incomplete_with_no_license
------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_valid_json_parses_@dataset_version_response
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------
Dataverse::DatasetVersionResponseTest: test_valid_json_parses_dataset_version_response_files_metadata_fields_subjects
---------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------
ProjectNameGeneratorTest: test_should_use_custom_delimiter_when_provided
------------------------------------------------------------------------
-----------------------------------------------------------------------------
ProjectNameGeneratorTest: test_should_generate_a_name_with_token_if_specified
-----------------------------------------------------------------------------
-------------------------------------------------------------------------
ProjectNameGeneratorTest: test_should_generate_a_name_with_default_format
-------------------------------------------------------------------------
---------------------------------------------------------------------
ProjectNameGeneratorTest: test_should_not_generate_nil_or_empty_names
---------------------------------------------------------------------
----------------------------------------------------------------------------------
ProjectNameGeneratorTest: test_should_pick_adjectives_and_nouns_from_defined_lists
----------------------------------------------------------------------------------
----------------------------------------------------------------------
Dataverse::ExternalToolResponseTest: test_parses_signed_URLs_correctly
----------------------------------------------------------------------
---------------------------------------------------------------------------
Dataverse::ExternalToolResponseTest: test_parses_query_parameters_correctly
---------------------------------------------------------------------------
---------------------------------------------------------------------
Dataverse::ExternalToolResponseTest: test_parses_the_status_correctly
---------------------------------------------------------------------
--------------------------------------------------------------------------------------------
RedirectBackWithAnchorTest: test_redirects_to_referer_with_anchor_if_anchor_param_is_present
--------------------------------------------------------------------------------------------
Processing by RedirectBackWithAnchorTest::DummyController#test_action as HTML
  Parameters: {"anchor"=>"section"}
Redirected to http://test.host/referer_path#section
Completed 302 Found in 2ms (GC: 2.0ms)
----------------------------------------------------------------------------
RedirectBackWithAnchorTest: test_redirects_to_fallback_if_referer_is_missing
----------------------------------------------------------------------------
Processing by RedirectBackWithAnchorTest::DummyController#test_action as HTML
Redirected to http://test.host/fallback
Completed 302 Found in 0ms (GC: 0.0ms)
-----------------------------------------------------------------------
RedirectBackWithAnchorTest: test_handles_invalid_referer_URL_gracefully
-----------------------------------------------------------------------
Processing by RedirectBackWithAnchorTest::DummyController#test_action as HTML
  Parameters: {"anchor"=>"bad"}
Redirected to [FILTERED]
Completed 302 Found in 0ms (GC: 0.0ms)
----------------------------------------------------------------------------------------
RedirectBackWithAnchorTest: test_redirects_to_fallback_with_anchor_if_referer_is_missing
----------------------------------------------------------------------------------------
Processing by RedirectBackWithAnchorTest::DummyController#test_action as HTML
  Parameters: {"anchor"=>"bottom"}
Redirected to http://test.host/fallback#bottom
Completed 302 Found in 0ms (GC: 0.0ms)
-------------------------------------------------------------------------------
RedirectBackWithAnchorTest: test_redirects_to_referer_if_present_without_anchor
-------------------------------------------------------------------------------
Processing by RedirectBackWithAnchorTest::DummyController#test_action as HTML
Redirected to http://test.host/referer_path
Completed 302 Found in 0ms (GC: 0.0ms)
----------------------------------------------------------------------------
Dataverse::CollectionResponseTest: test_valid_json_parses_dataverse_response
----------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
Dataverse::CollectionResponseTest: test_dataverse_response_with_empty_string_raises_JSON::ParserError
-----------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------
Dataverse::CollectionResponseTest: test_dataverse_response_on_empty_json_does_not_throw_exception
-------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
Dataverse::CollectionResponseTest: test_valid_json_parses_:root_dataverse_response_data
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
Dataverse::CollectionResponseTest: test_valid_json_parses_child_dataverse_response_data
---------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------
Download::DownloadServiceTest: test_Should_update_the_file_status_to_downloading_and_error_when_error
-----------------------------------------------------------------------------------------------------
[INFO](10780) Download::DownloadService 2025-06-05 22:47:39 UTC - start elapsed_time=00:00:00
[INFO](10780) Download::DownloadService 2025-06-05 22:47:39 UTC - Processing elapsed_time=00:00:00 stats=in_progress=0 pending=1 completed=0
[ERROR](18340) Download::DownloadService 2025-06-05 22:47:39 UTC - Error while processing file file_id=
[STACK] An error occurred
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/exception_raiser.rb:11:in `evaluate'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/return_values.rb:18:in `next'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/invocation.rb:26:in `call'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/expectation.rb:691:in `invoke'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/mocha-2.7.1/lib/mocha/mock.rb:337:in `handle_method_call'
[INFO](10780) Download::DownloadService 2025-06-05 22:47:39 UTC - Processing elapsed_time=00:00:00 stats=in_progress=0 pending=0 completed=1
------------------------------------------------------------------------------------------
Download::DownloadServiceTest: test_Only_one_download_service_should_run_at_any_given_time
------------------------------------------------------------------------------------------
[INFO](18360) Download::DownloadService 2025-06-05 22:47:39 UTC - start elapsed_time=00:00:00
[INFO](18360) Download::DownloadService 2025-06-05 22:47:39 UTC - Processing elapsed_time=00:00:00 stats=in_progress=0 pending=1 completed=0
[INFO](18380) Download::DownloadService 2025-06-05 22:47:39 UTC - start elapsed_time=00:00:00
[INFO](18380) Download::DownloadService 2025-06-05 22:47:39 UTC - Processing elapsed_time=00:00:00 stats=in_progress=0 pending=0 completed=0
[INFO](18360) Download::DownloadService 2025-06-05 22:47:39 UTC - Processing elapsed_time=00:00:00 stats=in_progress=0 pending=0 completed=1
---------------------------------------------------------------------------------------------------------
Download::DownloadServiceTest: test_Should_update_the_file_status_to_downloading_and_success_when_success
---------------------------------------------------------------------------------------------------------
[INFO](10780) Download::DownloadService 2025-06-05 22:47:39 UTC - start elapsed_time=00:00:00
[INFO](10780) Download::DownloadService 2025-06-05 22:47:39 UTC - Processing elapsed_time=00:00:00 stats=in_progress=0 pending=1 completed=0
[INFO](10780) Download::DownloadService 2025-06-05 22:47:39 UTC - Processing elapsed_time=00:00:00 stats=in_progress=0 pending=0 completed=1
-------------------------------------------------------
DownloadFileTest: test_save_twice_only_creates_one_file
-------------------------------------------------------
[INFO](10780) DetachedProcessController 2025-06-05 22:47:39 UTC - All executors idle. Shutting down... executors=2
[INFO](10780) ProcessExecutor 2025-06-05 22:47:39 UTC - Shutting down name=DetachedProcessControllerTest::MockService
[INFO](10780) ProcessExecutor 2025-06-05 22:47:39 UTC - Shutting down name=DetachedProcessControllerTest::MockService
[INFO](10780) DetachedProcessController 2025-06-05 22:47:39 UTC - Completed executors=2
----------------------------------------------------------------------------
DownloadFileTest: test_find_retrieves_the_record_with_the_same_stored_values
----------------------------------------------------------------------------
--------------------------------------
DownloadFileTest: test_should_be_valid
--------------------------------------
--------------------------------------------------------------
DownloadFileTest: test_should_initialize_with_valid_attributes
--------------------------------------------------------------
------------------------------------------------------------------------
DownloadFileTest: test_find_does_not_find_the_record_if_it_was_not_saved
------------------------------------------------------------------------
------------------------------------------------------------------
DownloadFileTest: test_should_be_invalid_because_of_invalid_values
------------------------------------------------------------------
-----------------------------------------------------------------------
DownloadFileTest: test_find_retrieves_the_record_only_if_both_ids_match
-----------------------------------------------------------------------
-------------------------------------------------------------
DownloadFileTest: test_save_stopped_due_to_invalid_attributes
-------------------------------------------------------------
-----------------------------
DownloadFileTest: test_update
-----------------------------
----------------------------------------------------
DownloadFileTest: test_should_validate_max_file_size
----------------------------------------------------
------------------------------
DownloadFileTest: test_to_yaml
------------------------------
----------------------------------------------------------------
DownloadFileTest: test_find_retrieves_the_record_if_it_was_saved
----------------------------------------------------------------
------------------------------
DownloadFileTest: test_to_json
------------------------------
-------------------------------------------------
DownloadFileTest: test_save_with_valid_attributes
-------------------------------------------------
---------------------------
DownloadFileTest: test_to_h
---------------------------
------------------------------------------------------------------------------------------------------------------------
Dataverse::ExternalToolServiceTest: test_process_callback_should_return_Dataverse_URL_and_the_external_tool_API_response
------------------------------------------------------------------------------------------------------------------------
---------------------------------------------
ProjectTest: test_initialization_should_works
---------------------------------------------
[INFO](10780) Dataverse::ExternalToolService 2025-06-05 22:47:39 UTC - requesting http://dataverse.test.com:8080/external/tool?name=value parsed_url=http://dataverse.test.com:8080/external/tool?name=value
----------------------------------------------------
ProjectTest: test_files_default_value_is_empty_array
----------------------------------------------------
-------------------------
ProjectTest: test_to_json
-------------------------
-----------------------------------------------------------------------
ProjectTest: test_find_retrieves_the_record_with_the_same_stored_values
-----------------------------------------------------------------------
--------------------------------------------
ProjectTest: test_save_with_valid_attributes
--------------------------------------------
-----------------------------------------------------------
ProjectTest: test_find_retrieves_the_record_if_it_was_saved
-----------------------------------------------------------
---------------------------------------------------------------
ProjectTest: test_should_be_valid_when_all_fields_are_populated
---------------------------------------------------------------
--------------------------------------------------------------------------------
ProjectTest: test_files_handle_multiple_files_sorted_by_creation_date_descendent
--------------------------------------------------------------------------------
--------------------------------------------------------
ProjectTest: test_save_stopped_due_to_invalid_attributes
--------------------------------------------------------
-----------------------------------------------------------------------------------------------
ProjectTest: test_all_returns_an_array_with_multiple_entries_sorted_by_creation_date_descendant
-----------------------------------------------------------------------------------------------
--------------------------------------------
ProjectTest: test_files_handle_a_single_file
--------------------------------------------
--------------------------------------------------------------
ProjectTest: test_all_returns_empty_array_if_no_records_stored
--------------------------------------------------------------
-----------------------------------------------------------------------
ProjectTest: test_find_retrieves_the_correct_record_on_multiple_records
-----------------------------------------------------------------------
--------------------------------------------------
ProjectTest: test_save_twice_only_creates_one_file
--------------------------------------------------
------------------------------------------------------------
ProjectTest: test_validations_should_fail_due_to_blank_value
------------------------------------------------------------
-------------------------
ProjectTest: test_to_yaml
-------------------------
----------------------
ProjectTest: test_to_h
----------------------
-------------------------------------------------------------------
ProjectTest: test_find_does_not_find_the_record_if_it_was_not_saved
-------------------------------------------------------------------
-----------------------------------------------------------
ProjectTest: test_all_returns_an_array_with_the_saved_entry
-----------------------------------------------------------
-------------------------------------------------------------------------------------------------
Repo::RepoResolverContextTest: test_should_return_a_RepoResolverResponse_with_object_url_and_type
-------------------------------------------------------------------------------------------------
----------------------------------------------------------------------
Repo::RepoResolverContextTest: test_should_initialize_with_valid_input
----------------------------------------------------------------------
----------------------------------------------------------------------------------
Repo::RepoResolverContextTest: test_should_return_nil_parsed_input_for_invalid_URL
----------------------------------------------------------------------------------
---------------------------------------------------------------------------------
Repo::RepoResolverContextTest: test_should_return_unknown_result_when_type_is_nil
---------------------------------------------------------------------------------
-----------------------------------------------------------------------------------
ProjectsControllerTest: test_should_handle_update_failure_via_HTML_with_both_fields
-----------------------------------------------------------------------------------
---------------------------------------------------------------------
ProjectsControllerTest: test_should_get_index_and_load_active_project
---------------------------------------------------------------------
Started PUT "/projects/680f3c03-78cc-40cb-add3-d3c695ade262" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Started GET "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Processing by ProjectsController#index as HTML
Processing by ProjectsController#update as HTML
  Parameters: {"name"=>"Bad Name", "download_dir"=>"/bad/path", "id"=>"680f3c03-78cc-40cb-add3-d3c695ade262"}
  Rendering layout layouts/application.html.erb
  Rendering projects/index.html.erb within layouts/application
[31mUnpermitted parameter: :id. Context: { controller: ProjectsController, action: update, request: #<ActionDispatch::Request:0x00007f45dd1aa458>, params: {"name"=>"Bad Name", "download_dir"=>"/bad/path", "controller"=>"projects", "action"=>"update", "id"=>"680f3c03-78cc-40cb-add3-d3c695ade262"} }[0m
Redirected to http://www.example.com/projects
Completed 302 Found in 1ms (GC: 0.0ms)
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.5ms | GC: 0.2ms)
Started GET "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
  Rendered shared/_button_to.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered projects/_actions.html.erb (Duration: 1.0ms | GC: 0.0ms)
Processing by ProjectsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering projects/index.html.erb within layouts/application
  Rendered shared/_file_row_date.html.erb (Duration: 0.5ms | GC: 0.2ms)
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered projects/_project_header.html.erb (Duration: 2.5ms | GC: 0.2ms)
  Rendered shared/_button_to.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered projects/_actions.html.erb (Duration: 1.2ms | GC: 0.2ms)
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered projects/_project_summary_downloads.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered projects/_project_summary.html.erb (Duration: 1.9ms | GC: 0.1ms)
  Rendered projects/_project.html.erb (Duration: 5.0ms | GC: 0.3ms)
  Rendered shared/_file_row_date.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered projects/index.html.erb within layouts/application (Duration: 7.4ms | GC: 0.5ms)
  Rendered layouts/_config.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.6ms | GC: 0.2ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered projects/_project_header.html.erb (Duration: 2.8ms | GC: 0.2ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 0.8ms | GC: 0.2ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | GC: 0.7ms)
Completed 200 OK in 11ms (Views: 10.1ms | GC: 0.7ms)
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered projects/_project_summary_downloads.html.erb (Duration: 1.2ms | GC: 0.2ms)
  Rendered projects/_project_summary.html.erb (Duration: 2.0ms | GC: 0.2ms)
  Rendered projects/_project.html.erb (Duration: 5.4ms | GC: 0.3ms)
  Rendered projects/index.html.erb within layouts/application (Duration: 8.2ms | GC: 0.6ms)
-----------------------------------------------------------------------
ProjectsControllerTest: test_should_not_set_active_project_if_not_found
-----------------------------------------------------------------------
Started POST "/projects/missing-id/set_active" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Processing by ProjectsController#set_active as HTML
  Parameters: {"id"=>"missing-id"}
Redirected to http://www.example.com/projects
Completed 302 Found in 0ms (GC: 0.0ms)
Started GET "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Processing by ProjectsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering projects/index.html.erb within layouts/application
  Rendered layouts/_config.html.erb (Duration: 4.3ms | GC: 0.2ms)
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_actions.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered shared/_file_row_date.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_project_header.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | GC: 0.8ms)
Completed 200 OK in 15ms (Views: 14.8ms | GC: 0.8ms)
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered projects/_project_summary_downloads.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered projects/_project_summary.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered projects/_project.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered projects/index.html.erb within layouts/application (Duration: 2.1ms | GC: 0.0ms)
-----------------------------------------------------------------------
ProjectsControllerTest: test_should_not_update_missing_project_via_HTML
-----------------------------------------------------------------------
  Rendered layouts/_config.html.erb (Duration: 1.9ms | GC: 0.0ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 1.0ms | GC: 0.1ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
Started PUT "/projects/missing-id" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.7ms | GC: 0.1ms)
Completed 200 OK in 7ms (Views: 7.0ms | GC: 0.1ms)
Processing by ProjectsController#update as HTML
  Parameters: {"name"=>"Should Fail", "download_dir"=>"/fail/path", "id"=>"missing-id"}
Redirected to http://www.example.com/projects
Completed 302 Found in 1ms (GC: 0.0ms)
Started GET "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
----------------------------------------------------------------------
ProjectsControllerTest: test_should_create_project_with_generated_name
----------------------------------------------------------------------
Processing by ProjectsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering projects/index.html.erb within layouts/application
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.6ms | GC: 0.3ms)
  Rendered shared/_button_to.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered projects/_actions.html.erb (Duration: 0.5ms | GC: 0.0ms)
Started POST "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
  Rendered shared/_file_row_date.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.2ms | GC: 0.0ms)
Processing by ProjectsController#create as HTML
  Rendered shared/_button_to.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered projects/_project_header.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_project_summary_downloads.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered projects/_project_summary.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered projects/_project.html.erb (Duration: 2.2ms | GC: 0.0ms)
  Rendered projects/index.html.erb within layouts/application (Duration: 3.6ms | GC: 0.3ms)
Redirected to http://www.example.com/projects
Completed 302 Found in 2ms (GC: 0.2ms)
  Rendered layouts/_config.html.erb (Duration: 0.4ms | GC: 0.0ms)
Started GET "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
Processing by ProjectsController#index as HTML
  Rendered layouts/nav/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering projects/index.html.erb within layouts/application
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | GC: 0.6ms)
Completed 200 OK in 8ms (Views: 7.5ms | GC: 0.6ms)
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered projects/_actions.html.erb (Duration: 0.7ms | GC: 0.2ms)
  Rendered shared/_file_row_date.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_project_header.html.erb (Duration: 1.2ms | GC: 0.0ms)
---------------------------------------------------------------
ProjectsControllerTest: test_should_not_destroy_missing_project
---------------------------------------------------------------
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered projects/_project_summary_downloads.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered projects/_project_summary.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered projects/_project.html.erb (Duration: 1.8ms | GC: 0.0ms)
  Rendered shared/_file_row_date.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
Started DELETE "/projects/missing-id" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
  Rendered projects/_project_header.html.erb (Duration: 1.0ms | GC: 0.2ms)
Processing by ProjectsController#destroy as HTML
  Parameters: {"id"=>"missing-id"}
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered projects/_project_summary_downloads.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered projects/_project_summary.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered projects/_project.html.erb (Duration: 1.6ms | GC: 0.2ms)
  Rendered projects/index.html.erb within layouts/application (Duration: 4.7ms | GC: 0.4ms)
Redirected to http://www.example.com/projects
Completed 302 Found in 0ms (GC: 0.0ms)
  Rendered layouts/_config.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
Started GET "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
  Rendered layouts/nav/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
Processing by ProjectsController#index as HTML
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.3ms | GC: 0.1ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering projects/index.html.erb within layouts/application
  Rendered shared/_modal.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.0ms | GC: 0.5ms)
Completed 200 OK in 8ms (Views: 7.3ms | GC: 0.5ms)
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_actions.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered shared/_file_row_date.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_project_header.html.erb (Duration: 0.9ms | GC: 0.0ms)
---------------------------------------------------
ProjectsControllerTest: test_should_destroy_project
---------------------------------------------------
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered projects/_project_summary_downloads.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered projects/_project_summary.html.erb (Duration: 0.8ms | GC: 0.1ms)
  Rendered projects/_project.html.erb (Duration: 1.8ms | GC: 0.1ms)
  Rendered projects/index.html.erb within layouts/application (Duration: 2.5ms | GC: 0.1ms)
  Rendered layouts/_config.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
Started DELETE "/projects/3d317393-5aff-4908-850b-8bee03e5944b" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
  Rendered layouts/nav/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
Processing by ProjectsController#destroy as HTML
  Parameters: {"id"=>"3d317393-5aff-4908-850b-8bee03e5944b"}
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | GC: 0.1ms)
  Rendered shared/_modal.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | GC: 0.2ms)
Completed 200 OK in 6ms (Views: 6.0ms | GC: 0.2ms)
Redirected to http://www.example.com/projects
Completed 302 Found in 1ms (GC: 0.0ms)
Started GET "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Processing by ProjectsController#index as HTML
------------------------------------------------------------
ProjectsControllerTest: test_should_get_project_details_page
------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering projects/index.html.erb within layouts/application
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_actions.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered projects/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
Started GET "/projects/3608491e-5cb2-41da-9873-62650a450167" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
  Rendered layouts/_config.html.erb (Duration: 0.3ms | GC: 0.0ms)
Processing by ProjectsController#show as HTML
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Parameters: {"id"=>"3608491e-5cb2-41da-9873-62650a450167"}
  Rendered layouts/nav/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering projects/show.html.erb within layouts/application
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.3ms | GC: 0.1ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.1ms)
Completed 200 OK in 3ms (Views: 3.0ms | GC: 0.2ms)
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered shared/_file_row_date.html.erb (Duration: 0.4ms | GC: 0.0ms)
--------------------------------------------------------------------------------------
ProjectsControllerTest: test_should_update_project_via_JSON_with_name_and_download_dir
--------------------------------------------------------------------------------------
  Rendered shared/_inline_field_submit.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered projects/show/_project_actions.html.erb (Duration: 2.7ms | GC: 0.2ms)
[INFO](10780) DetachedProcessController 2025-06-05 22:47:39 UTC - Launching executor name=Mocha::Mock
[INFO](10780) ProcessExecutor 2025-06-05 22:47:39 UTC - Starting service name=Mocha::Mock
[INFO](17700) ProcessExecutor 2025-06-05 22:47:39 UTC - Finished service name=Mocha::Mock
Started PUT "/projects/2627b94f-6e10-42a0-ac39-83d1473d2e74" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
  Rendered projects/show/_project_tabs.html.erb (Duration: 0.5ms | GC: 0.0ms)
Processing by ProjectsController#update as JSON
  Parameters: {"name"=>"Updated JSON Name", "download_dir"=>"/some/json/path", "id"=>"2627b94f-6e10-42a0-ac39-83d1473d2e74", "project"=>{"name"=>"Updated JSON Name", "download_dir"=>"/some/json/path"}}
[31mUnpermitted parameters: :id, :project. Context: { controller: ProjectsController, action: update, request: #<ActionDispatch::Request:0x00007f45ddb43aa0>, params: {"name"=>"Updated JSON Name", "download_dir"=>"/some/json/path", "controller"=>"projects", "action"=>"update", "id"=>"2627b94f-6e10-42a0-ac39-83d1473d2e74", "project"=>{"name"=>"Updated JSON Name", "download_dir"=>"/some/json/path"}} }[0m
Completed 200 OK in 1ms (Views: 0.1ms | GC: 0.0ms)
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered projects/show/_download_actions.html.erb (Duration: 1.0ms | GC: 0.2ms)
  Rendered projects/show/_download_files.html.erb (Duration: 2.2ms | GC: 0.2ms)
  Rendered projects/show.html.erb within layouts/application (Duration: 6.8ms | GC: 0.4ms)
  Rendered layouts/_config.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
-----------------------------------------------------------------------
ProjectsControllerTest: test_should_not_update_missing_project_via_JSON
-----------------------------------------------------------------------
  Rendered layouts/nav/_navigation.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | GC: 0.2ms)
  Rendered shared/_modal.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.9ms | GC: 0.6ms)
Completed 200 OK in 11ms (Views: 10.1ms | GC: 0.6ms)
Started PUT "/projects/missing-id" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Processing by ProjectsController#update as JSON
  Parameters: {"name"=>"Should Fail", "download_dir"=>"/fail/path", "id"=>"missing-id", "project"=>{"name"=>"Should Fail", "download_dir"=>"/fail/path"}}
Completed 404 Not Found in 0ms (Views: 0.1ms | GC: 0.0ms)
--------------------------------------------------------------------------------------
ProjectsControllerTest: test_should_update_project_via_HTML_with_name_and_download_dir
--------------------------------------------------------------------------------------
---------------------------------------------------------------------
ProjectsControllerTest: test_should_create_project_with_provided_name
---------------------------------------------------------------------
Started PUT "/projects/20b6aaec-4d68-4ed5-9d57-4db016c3cf2a" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Processing by ProjectsController#update as HTML
  Parameters: {"name"=>"Updated Name", "download_dir"=>"/some/new/path", "id"=>"20b6aaec-4d68-4ed5-9d57-4db016c3cf2a"}
Started POST "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Processing by ProjectsController#create as HTML
  Parameters: {"project_name"=>"manual_project"}
[31mUnpermitted parameter: :id. Context: { controller: ProjectsController, action: update, request: #<ActionDispatch::Request:0x00007f45ddbd31a0>, params: {"name"=>"Updated Name", "download_dir"=>"/some/new/path", "controller"=>"projects", "action"=>"update", "id"=>"20b6aaec-4d68-4ed5-9d57-4db016c3cf2a"} }[0m
Redirected to http://www.example.com/projects
Completed 302 Found in 1ms (GC: 0.0ms)
Redirected to http://www.example.com/projects
Completed 302 Found in 1ms (GC: 0.2ms)
Started GET "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Started GET "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Processing by ProjectsController#index as HTML
Processing by ProjectsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering layout layouts/application.html.erb
  Rendering projects/index.html.erb within layouts/application
  Rendering projects/index.html.erb within layouts/application
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_actions.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_actions.html.erb (Duration: 0.5ms | GC: 0.2ms)
  Rendered shared/_file_row_date.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_file_row_date.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_project_header.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_project_header.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered projects/_project_summary_downloads.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered projects/_project_summary.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered projects/_project.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered projects/_project_summary_downloads.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered projects/_project_summary.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered projects/_project.html.erb (Duration: 1.5ms | GC: 0.0ms)
  Rendered projects/index.html.erb within layouts/application (Duration: 2.4ms | GC: 0.2ms)
  Rendered shared/_file_row_date.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_project_header.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered layouts/_config.html.erb (Duration: 0.5ms | GC: 0.2ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered projects/_project_summary_downloads.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered projects/_project_summary.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered projects/_project.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered projects/index.html.erb within layouts/application (Duration: 3.7ms | GC: 0.1ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layouts/_config.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 0.4ms)
Completed 200 OK in 5ms (Views: 4.8ms | GC: 0.4ms)
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | GC: 0.2ms)
Completed 200 OK in 7ms (Views: 6.1ms | GC: 0.3ms)
-----------------------------------------------------------------------------------
ProjectsControllerTest: test_should_handle_update_failure_via_JSON_with_both_fields
-----------------------------------------------------------------------------------
------------------------------------------------------
ProjectsControllerTest: test_should_set_active_project
------------------------------------------------------
Started PUT "/projects/3fad9c46-6dd2-4330-8092-5c920f211d36" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Processing by ProjectsController#update as JSON
  Parameters: {"name"=>"Bad Name", "download_dir"=>"/bad/path", "id"=>"3fad9c46-6dd2-4330-8092-5c920f211d36", "project"=>{"name"=>"Bad Name", "download_dir"=>"/bad/path"}}
[31mUnpermitted parameters: :id, :project. Context: { controller: ProjectsController, action: update, request: #<ActionDispatch::Request:0x00007f45ddb49e78>, params: {"name"=>"Bad Name", "download_dir"=>"/bad/path", "controller"=>"projects", "action"=>"update", "id"=>"3fad9c46-6dd2-4330-8092-5c920f211d36", "project"=>{"name"=>"Bad Name", "download_dir"=>"/bad/path"}} }[0m
Started POST "/projects/181423c0-d06b-4747-8fbc-510323a23971/set_active" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Completed 422 Unprocessable Content in 1ms (Views: 0.1ms | GC: 0.0ms)
Processing by ProjectsController#set_active as HTML
  Parameters: {"id"=>"181423c0-d06b-4747-8fbc-510323a23971"}
Redirected to http://www.example.com/projects
Completed 302 Found in 1ms (GC: 0.0ms)
---------------------------------------------------------------
FileStatusTest: test_should_be_able_to_check_different_statuses
---------------------------------------------------------------
Started GET "/projects" for 127.0.0.1 at 2025-06-05 22:47:39 +0000
Processing by ProjectsController#index as HTML
----------------------------------------------------------------------------
FileStatusTest: test_should_raise_error_when_invalid_status_constant_is_used
----------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering projects/index.html.erb within layouts/application
  Rendered shared/_breadcrumbs.html.erb (Duration: 0.2ms | GC: 0.0ms)
-----------------------------------------------------------------------
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
FileStatusTest: test_should_return_correct_status_using_dynamic_methods
-----------------------------------------------------------------------
  Rendered projects/_actions.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered shared/_file_row_date.html.erb (Duration: 0.1ms | GC: 0.0ms)
----------------------------------------------------------
FileStatusTest: test_should_initialize_with_a_valid_status
----------------------------------------------------------
  Rendered shared/_button_to.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered shared/_button_to.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered projects/_project_header.html.erb (Duration: 1.1ms | GC: 0.0ms)
----------------------------------------------------------
FileStatusTest: test_should_have_constants_for_each_status
----------------------------------------------------------
  Rendered shared/_file_summary_widget.html.erb (Duration: 0.0ms | GC: 0.0ms)
  Rendered projects/_project_summary_downloads.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered projects/_project_summary.html.erb (Duration: 0.9ms | GC: 0.2ms)
  Rendered projects/_project.html.erb (Duration: 2.3ms | GC: 0.2ms)
  Rendered projects/index.html.erb within layouts/application (Duration: 3.1ms | GC: 0.2ms)
----------------------------------------------------------
FileStatusTest: test_should_raise_error_for_invalid_status
----------------------------------------------------------
  Rendered layouts/_config.html.erb (Duration: 0.3ms | GC: 0.0ms)
-------------------------------------------------
FileStatusTest: test_should_not_be_case_sensitive
-------------------------------------------------
  Rendered layouts/nav/_logo.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered layouts/nav/_navigation.html.erb (Duration: 0.7ms | GC: 0.0ms)
--------------------------------------------------------------------------------------
Command::CommandServerTest: test_Should_dispatch_request_and_return_response_correctly
--------------------------------------------------------------------------------------
  Rendered shared/_repo_resolver_bar.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered layouts/_flash_messages.html.erb (Duration: 0.0ms | GC: 0.0ms)
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - UNIXServer created 
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered shared/_modal.html.erb (Duration: 0.1ms | GC: 0.1ms)
[INFO](19240) Command::CommandServer 2025-06-05 22:47:39 UTC - Server start socket=/tmp/d20250605-165-uu1cnf/command_server.sock
  Rendered layout layouts/application.html.erb (Duration: 5.6ms | GC: 0.3ms)
Completed 200 OK in 6ms (Views: 5.8ms | GC: 0.3ms)
-----------------------------------------------------------------------------
Command::CommandServerTest: test_shutdown_can_be_called_multiple_times_safely
-----------------------------------------------------------------------------
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - UNIXServer created 
[INFO](19340) Command::CommandServer 2025-06-05 22:47:39 UTC - Server start socket=/tmp/d20250605-169-74ue76/command_server.sock
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - Shutdown completed 
------------------------------------------------------------------------------------------
Command::CommandServerTest: test_Should_restart_the_server_and_respond_again_after_restart
------------------------------------------------------------------------------------------
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - UNIXServer created 
[INFO](19260) Command::CommandServer 2025-06-05 22:47:39 UTC - Server start socket=/tmp/d20250605-165-e5q3p6/command_server.sock
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - Shutdown completed 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - Shutdown completed 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - Shutdown completed 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - Shutdown completed 
-----------------------------------------------------------------------------------------
Command::CommandServerTest: test_Should_recover_from_simulated_socket_failure_via_restart
-----------------------------------------------------------------------------------------
[INFO](10780) Command::CommandServer 2025-06-05 22:47:39 UTC - UNIXServer created 
[INFO](19360) Command::CommandServer 2025-06-05 22:47:39 UTC - Server start socket=/tmp/d20250605-169-k5gl8e/command_server.sock
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Restarting server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutdown completed 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - UNIXServer created 
[INFO](19280) Command::CommandServer 2025-06-05 22:47:40 UTC - Server start socket=/tmp/d20250605-165-e5q3p6/command_server.sock
[ERROR](19360) Command::CommandServer 2025-06-05 22:47:40 UTC - Server socket error socket=/tmp/d20250605-169-k5gl8e/command_server.sock
[STACK] stream closed in another thread
[STACK] /usr/local/app/app/services/command/command_server.rb:20:in `accept'
[STACK] /usr/local/app/app/services/command/command_server.rb:20:in `block (2 levels) in start'
[STACK] /usr/local/app/app/services/command/command_server.rb:19:in `loop'
[STACK] /usr/local/app/app/services/command/command_server.rb:19:in `block in start'
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Restarting server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutdown completed 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - UNIXServer created 
[INFO](19380) Command::CommandServer 2025-06-05 22:47:40 UTC - Server start socket=/tmp/d20250605-169-k5gl8e/command_server.sock
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutdown completed 
-----------------------------------------------------------------------------------------
Command::CommandServerTest: test_Should_return_error_response_when_receiving_invalid_JSON
-----------------------------------------------------------------------------------------
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - UNIXServer created 
[INFO](19300) Command::CommandServer 2025-06-05 22:47:40 UTC - Server start socket=/tmp/d20250605-165-orleub/command_server.sock
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutdown completed 
-------------------------------------------------------------------------------------------
Command::CommandServerTest: test_Should_return_error_response_when_handler_raises_exception
-------------------------------------------------------------------------------------------
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - UNIXServer created 
[INFO](19400) Command::CommandServer 2025-06-05 22:47:40 UTC - Server start socket=/tmp/d20250605-169-uu1cnf/command_server.sock
[ERROR](19300) Command::CommandServer 2025-06-05 22:47:40 UTC - Error processing request request=this is not json

[STACK] unexpected token at 'this is not json'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/json-2.10.2/lib/json/common.rb:248:in `parse'
[STACK] /usr/local/app/vendor/bundle/ruby/3.1.0/gems/json-2.10.2/lib/json/common.rb:248:in `parse'
[STACK] /usr/local/app/app/services/command/request.rb:22:in `from_json'
[STACK] /usr/local/app/app/services/command/command_server.rb:58:in `handle_request'
[STACK] /usr/local/app/app/services/command/command_server.rb:21:in `block (2 levels) in start'
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutting down server... 
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutdown completed 
------------------------------------------------------------------------------------------
Dataverse::ConnectorMetadataTest: test_should_not_throw_error_when_calling_invalid_methods
------------------------------------------------------------------------------------------
[ERROR](19400) Command::CommandRegistry 2025-06-05 22:47:40 UTC - Error while executing handler request=#<Command::Request:0x00007f45dc722328 @command="failing_command", @headers={}, @body=#<OpenStruct>> handler=
[STACK] Something bad happened
[STACK] /usr/local/app/test/services/command/command_server_test.rb:83:in `process'
[STACK] /usr/local/app/app/services/command/command_registry.rb:23:in `block in dispatch'
[STACK] /usr/local/app/app/services/command/command_registry.rb:21:in `each'
[STACK] /usr/local/app/app/services/command/command_registry.rb:21:in `dispatch'
[STACK] /usr/local/app/app/services/command/command_server.rb:59:in `handle_request'
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutting down server... 
------------------------------------------------------------------------------------------------
Dataverse::ConnectorMetadataTest: test_should_create_read/write_methods_for_any_hash_field_names
------------------------------------------------------------------------------------------------
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutdown completed 
------------------------------------------------------------------------
Dataverse::ConnectorMetadataTest: test_to_h_should_hash_with_string_keys
------------------------------------------------------------------------
[INFO](17720) ProcessExecutor 2025-06-05 22:47:40 UTC - Finished service name=DetachedProcessControllerTest::MockService
[INFO](10780) DetachedProcessController 2025-06-05 22:47:40 UTC - All executors idle. Shutting down... executors=2
[INFO](10780) ProcessExecutor 2025-06-05 22:47:40 UTC - Shutting down name=Mocha::Mock
[INFO](10780) ProcessExecutor 2025-06-05 22:47:40 UTC - Shutting down name=DetachedProcessControllerTest::MockService
[INFO](10780) DetachedProcessController 2025-06-05 22:47:40 UTC - Completed executors=2
[ERROR](17820) Command::CommandServer 2025-06-05 22:47:40 UTC - Error processing request request={"command":"long_task","headers":{},"body":{}}

[STACK] Broken pipe
[STACK] /usr/local/app/app/services/command/command_server.rb:61:in `write'
[STACK] /usr/local/app/app/services/command/command_server.rb:61:in `puts'
[STACK] /usr/local/app/app/services/command/command_server.rb:61:in `handle_request'
[STACK] /usr/local/app/app/services/command/command_server.rb:21:in `block (2 levels) in start'
[STACK] /usr/local/app/app/services/command/command_server.rb:19:in `loop'
[INFO](10780) Command::CommandServer 2025-06-05 22:47:40 UTC - Shutdown completed 
